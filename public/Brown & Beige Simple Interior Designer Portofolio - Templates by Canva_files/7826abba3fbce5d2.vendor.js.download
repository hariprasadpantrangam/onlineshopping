(globalThis.webpackChunk_canva_web=globalThis.webpackChunk_canva_web||[]).push([[15254],{11752:e=>{"use strict";e.exports=function(e){for(var t=[],r=e.length,i=0;i<r;i++){var s=e.charCodeAt(i);if(s>=55296&&s<=56319&&r>i+1){var n=e.charCodeAt(i+1);n>=56320&&n<=57343&&(s=1024*(s-55296)+n-56320+65536,i+=1)}s<128?t.push(s):s<2048?(t.push(s>>6|192),t.push(63&s|128)):s<55296||s>=57344&&s<65536?(t.push(s>>12|224),t.push(s>>6&63|128),t.push(63&s|128)):s>=65536&&s<=1114111?(t.push(s>>18|240),t.push(s>>12&63|128),t.push(s>>6&63|128),t.push(63&s|128)):t.push(239,191,189)}return new Uint8Array(t).buffer}},153744:(e,t,r)=>{e.exports=function(){var t=arguments.length?arguments[0]:{},i=t.count||1,s=t.units||"sentences",n=t.sentenceLowerBound||5,a=t.sentenceUpperBound||15,o=t.paragraphLowerBound||3,h=t.paragraphUpperBound||7,l=t.format||"plain",c=t.words||r(609205).words,u=t.random||Math.random,d=t.suffix;if(!d){var f=e.exports,m="undefined"!=typeof product&&"ReactNative"===product.navigator,E="undefined"!=typeof process&&"win32"===process.platform;d=!m&&f&&E?"\r\n":"\n"}function g(e,t){return Math.floor(u()*(t-e+1)+e)}function T(e){return e[g(0,e.length-1)]}function p(e,t,r){for(var i="",s={min:0,max:g(t,r)};s.min<s.max;)i+=" "+T(e),s.min++;return i.length&&(i=(i=i.slice(1)).charAt(0).toUpperCase()+i.slice(1)),i}function v(e,t,r,i,s){for(var n="",a={min:0,max:g(t,r)};a.min<a.max;)n+=". "+p(e,i,s),a.min++;return n.length&&(n=n.slice(2),n+="."),n}s=function(e){if(-1===e.indexOf("s",e.length-1))return e+"s";return e}(s.toLowerCase());var A,_,b={min:0,max:i},R="";for("html"===l&&(A="<p>",_="</p>");b.min<b.max;){switch(s.toLowerCase()){case"words":R+=" "+T(c);break;case"sentences":R+=". "+p(c,n,a);break;case"paragraphs":var w=v(c,o,h,n,a);"html"===l?(w=A+w+_,b.min<b.max-1&&(w+=d)):b.min<b.max-1&&(w+=d+d),R+=w}b.min++}if(R.length){var x=0;0===R.indexOf(". ")?x=2:0!==R.indexOf(".")&&0!==R.indexOf(" ")||(x=1),R=R.slice(x),"sentences"===s&&(R+=".")}return R}},334022:e=>{"use strict";var t={single_source_shortest_paths:function(e,r,i){var s={},n={};n[r]=0;var a,o,h,l,c,u,d,f=t.PriorityQueue.make();for(f.push(r,0);!f.empty();)for(h in o=(a=f.pop()).value,l=a.cost,c=e[o]||{})c.hasOwnProperty(h)&&(u=l+c[h],d=n[h],(void 0===n[h]||d>u)&&(n[h]=u,f.push(h,u),s[h]=o));if(void 0!==i&&void 0===n[i]){var m=["Could not find a path from ",r," to ",i,"."].join("");throw new Error(m)}return s},extract_shortest_path_from_predecessor_list:function(e,t){for(var r=[],i=t;i;)r.push(i),e[i],i=e[i];return r.reverse(),r},find_path:function(e,r,i){var s=t.single_source_shortest_paths(e,r,i);return t.extract_shortest_path_from_predecessor_list(s,i)},PriorityQueue:{make:function(e){var r,i=t.PriorityQueue,s={};for(r in e=e||{},i)i.hasOwnProperty(r)&&(s[r]=i[r]);return s.queue=[],s.sorter=e.sorter||i.default_sorter,s},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var r={value:e,cost:t};this.queue.push(r),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=t},447524:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});class r extends Error{}class i extends r{}class s extends r{}class n extends r{}class a extends r{}class o extends r{}class h extends r{}class l extends r{constructor(e){super(`unhandled case: ${JSON.stringify(e)}`)}}let c=0;function u(){return c++}function d(e){return null!=e}function f(e){return e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Float32Array}function m(e){switch(e){case"i8":return 5120;case"u8":return 5121;case"i16":return 5122;case"u16":return 5123;case"i32":return 5124;case"u32":return 5125;case"f32":return 5126;default:throw new l(e)}}const E={FLOAT:{type:"float",name:"float",length:1},VEC2:{type:"float",name:"vec2",length:2},VEC3:{type:"float",name:"vec3",length:3},VEC4:{type:"float",name:"vec4",length:4}},g={MAT2:{type:"matrix",name:"mat2",length:4},MAT3:{type:"matrix",name:"mat3",length:9},MAT4:{type:"matrix",name:"mat4",length:16}},T={INT:{type:"int",name:"int",length:1},IVEC2:{type:"int",name:"ivec2",length:2},IVEC3:{type:"int",name:"ivec3",length:3},IVEC4:{type:"int",name:"ivec4",length:4},SAMPLER2D:{type:"int",name:"sampler2D",length:1}},p=new Map([[5126,E.FLOAT],[35664,E.VEC2],[35665,E.VEC3],[35666,E.VEC4],[35674,g.MAT2],[35675,g.MAT3],[35676,g.MAT4],[5124,T.INT],[35667,T.IVEC2],[35668,T.IVEC3],[35669,T.IVEC4],[35678,T.SAMPLER2D]]);class v{constructor(e){var t;this.id=u(),this.source=e,e instanceof ArrayBuffer?this.dataType="f32":(t=e,"undefined"!=typeof SharedArrayBuffer&&t instanceof SharedArrayBuffer?this.dataType="f32":this.dataType=function(e){if(e instanceof Float32Array)return"f32";if(e instanceof Uint8Array)return"u8";if(e instanceof Int32Array)return"i32";if(e instanceof Uint32Array)return"u32";if(e instanceof Uint8ClampedArray)return"u8";if(e instanceof Int8Array)return"i8";if(e instanceof Int16Array)return"i16";if(e instanceof Uint16Array)return"u16";throw new l(e)}(e)),this.length=e.byteLength/function(e){switch(e){case"i8":case"u8":return 1;case"i16":case"u16":return 2;case"i32":case"u32":case"f32":return 4;default:throw new l(e)}}(this.dataType)}}class A extends v{constructor(){super(...arguments),this.resourceType="buffer"}}class _ extends v{constructor(){super(...arguments),this.resourceType="elements"}}const b={points:0,lines:1,"line loop":2,"line strip":3,triangles:4,"triangle strip":5,"triangle fan":6},R={zero:0,one:1,"src color":768,"one minus src color":769,"dst color":774,"one minus dst color":775,"src alpha":770,"one minus src alpha":771,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},w={front:1028,back:1029,"front and back":1032},x={cw:2304,ccw:2305},F={add:32774,subtract:32778,"reverse subtract":32779},M={source:"one",destination:"zero",equation:"add"};const y={never:512,less:513,equal:514,lequal:515,greater:516,notequal:517,gequal:518,always:519};class S{constructor({primitive:e="triangles",shader:t,attributes:r,indices:i,count:s=0,instances:n,uniforms:a={},textures:o={},blend:h,depthTest:l,cullFace:c,frontFace:u,renderTarget:d}){var m;this.primitive=b[e],this.shader=t,this.attributes=function(e){const t=Object.create(null);for(const[r,i]of Object.entries(e)){let e;e="buffer"in i&&!f(i)?{...i,buffer:I(i.buffer)}:{buffer:I(i)},t[r]=e}return t}(r),this.indices=i?(m=i,Array.isArray(m)&&(m=new Uint16Array(m)),f(m)&&(m=new _(m)),m):void 0,this.count=s,this.instances=n,this.uniforms=a,this.textures=o,this._cullFace=c?w[c]:void 0,this._frontFace=u?x[u]:2305,this.blend=h?function(e){var t,r;const i={...M,...null!=(t=e.rgb)?t:e},s={...M,...null!=(r=e.alpha)?r:e};return{rgb:{source:R[i.source],destination:R[i.destination],equation:F[i.equation]},alpha:{source:R[s.source],destination:R[s.destination],equation:F[s.equation]}}}(h):void 0,this.depthTest=l?function(e){var t,r;return{mask:null==(t=e.mask)||t,func:y[null!=(r=e.func)?r:"less"],range:{near:0,far:1,...e.range}}}(l):void 0,this.renderTarget=d}get cullFace(){return this._cullFace}set cullFace(e){this._cullFace=void 0!==e?w[e]:void 0}get frontFace(){return this._frontFace}set frontFace(e){e in x&&(this._frontFace=x[e])}get resources(){return[this.shader,...Object.values(this.attributes).map((e=>e.buffer)),...Object.values(this.textures),this.indices,this.renderTarget].filter(d)}}function I(e){return Array.isArray(e)&&(e=new Float32Array(e)),f(e)&&(e=new A(e)),e}class C{constructor(e){this.id=u(),this.resourceType="shader",this.vertexSource=e.vertexSource,this.fragmentSource=e.fragmentSource}}const N="preserve",L="fixed";class U{constructor(e){var t;this.id=u(),this.resourceType="texture",this.textureType="image",this.size=L,this.numberFormat="u8",this.source=e.source,this.name=e.name,this.alpha=e.alpha||N,this.anisotropy=null!=(t=e.anisotropy)?t:0,this.colorFormat=e.colorFormat||"rgba"}get width(){return this.source.width}get height(){return this.source.height}}class P{constructor(e){var t;this.id=u(),this.resourceType="texture",this.textureType="binary",this.size=L,this.source=e.source,this.name=e.name,this.alpha=e.alpha||N,this.width=e.width,this.height=e.height,this.anisotropy=null!=(t=e.anisotropy)?t:0}get colorFormat(){const e=this.source.length/(this.width*this.height);if(1===e)return"r";if(3===e)return"rgb";if(4===e)return"rgba";throw new o(`Invalid number of color channels for binary texture with ID: ${this.id}. Number of channels must be 1 (R) or 3 (RGB) or 4 (RGBA) but the provided data has ${e} channels.`)}get numberFormat(){return this.source instanceof Uint8Array?"u8":"f32"}}class B{constructor(e){var t;this.id=u(),this.resourceType="texture",this.textureType="render",this.source=null,this.name=e.name,this.alpha=e.alpha||N,this.size=e.size||L,this.width=e.width||("fixed"===this.size?0:1),this.height=e.height||("fixed"===this.size?0:1),this.colorFormat=e.colorFormat,this.numberFormat=e.numberFormat,this.anisotropy=null!=(t=e.anisotropy)?t:0}}function D(e,t){return{width:"fixed"===e.size?e.width||t.width:(e.width||1)*t.width,height:"fixed"===e.size?e.height||t.height:(e.height||1)*t.height}}function O(e,t){if("u32"===t.dataType&&!e.getExtension("OES_element_index_uint"))throw new a("UNSIGNED_INT indices are not supported on this device.");const r=e.createBuffer(),i="buffer"===t.resourceType?e.ARRAY_BUFFER:e.ELEMENT_ARRAY_BUFFER;return e.bindBuffer(i,r),e.bufferData(i,t.source,e.STATIC_DRAW),e.bindBuffer(i,null),r}class k{constructor(e,t,r){this.name=e.name,this.length=e.size,this.location=t;const i=p.get(e.type);if(!i)throw new o(`Type of uniform '${e.name}' is not supported.`);this.meta=i,this._data=this.parseData(r)}parseData(e){if(!e)return new Array(this.meta.length).fill(0);const t=this.meta.length*this.length;if(e.flat().length!==t)throw new o(`Could not set uniform '${this.meta.type} ${this.name}'. Expected data with a length of ${t} but your data has a length of ${e.length}.`);return e}equals(e){const t=this._data,r=e;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==r[i])return!1;return!0}get data(){return this._data}set data(e){this._data=this.parseData(e)}}function G(e,t){const{meta:r,name:i,location:s,data:n}=t,a=n.flat();if("int"===r.type)switch(r.length){case 1:e.uniform1iv(s,a);break;case 2:e.uniform2iv(s,a);break;case 3:e.uniform3iv(s,a);break;case 4:e.uniform4iv(s,a);break;default:throw new o(`Could not set the value for uniform '${i}'. Make sure its length is between 1 and 4 (inclusive).`)}else if("float"===r.type)switch(r.length){case 1:e.uniform1fv(s,a);break;case 2:e.uniform2fv(s,a);break;case 3:e.uniform3fv(s,a);break;case 4:e.uniform4fv(s,a);break;default:throw new o(`Could not set the value for uniform '${i}'. Make sure its length is between 1 and 4 (inclusive).`)}else switch(r.length){case 4:e.uniformMatrix2fv(s,!1,a);break;case 9:e.uniformMatrix3fv(s,!1,a);break;case 16:e.uniformMatrix4fv(s,!1,a);break;default:throw new o(`Could not set the value for uniform '${i}'. Make sure its length is between 2 and 4 (inclusive).`)}}function V(e,t,r){(function(e){const t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);return!!t&&t.precision>10})(e)&&(r=function(e){return e.replace("precision mediump float;","precision highp float;")}(r));const n=e.createShader(t);if(!n)throw new s("Could not create shader");if(e.shaderSource(n,r),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS))return n;{const r=e.getShaderInfoLog(n);e.deleteShader(n);const s=t===e.VERTEX_SHADER?"vertex":"fragment";throw new i(`Could not compile ${s} shader. Details: ${r}`)}}function X(e,t){const r=function(e,t,r){const n=e.createProgram();if(!n)throw new s("Could not create program");const a=V(e,e.VERTEX_SHADER,t),o=V(e,e.FRAGMENT_SHADER,r);if(e.attachShader(n,a),e.attachShader(n,o),e.linkProgram(n),e.deleteShader(a),e.deleteShader(o),e.getProgramParameter(n,e.LINK_STATUS))return n;throw new i(`Could not link program. Details: ${e.getProgramInfoLog(n)}`)}(e,t.vertexSource,t.fragmentSource);e.useProgram(r);const n=e.getProgramParameter(r,e.ACTIVE_ATTRIBUTES),a=new Map;for(let i=0;i<n;i++){const t=e.getActiveAttrib(r,i),s=t?e.getAttribLocation(r,t.name):-1;if(!t||-1===s)throw new h(`Could not cache attribute. Could not find attribute or location at index ${i}. This is likely a bug with the renderer.`);const n=p.get(t.type);if(!n)throw new o(`Type of attribute '${t.name}' is not supported.`);e.enableVertexAttribArray(s),a.set(t.name,{location:s,meta:n})}const l=e.getProgramParameter(r,e.ACTIVE_UNIFORMS),c=new Map,u=new Map;let d=0;for(let i=0;i<l;i++){const t=e.getActiveUniform(r,i),s=t?e.getUniformLocation(r,t.name):null;if(!t||!s)throw new h(`Could not cache uniform. Could not find uniform or location at index ${i}. This is likely a bug with the renderer.`);const n=t.name.endsWith("[0]")?t.name.slice(0,-3):t.name;if(t.type===e.SAMPLER_2D||t.type===e.SAMPLER_CUBE){const r=new k(t,s,[d]);c.set(n,r),G(e,r),d++}else{const r=new k(t,s);u.set(n,r),G(e,r)}}return e.useProgram(null),{program:r,attributes:a,textures:c,uniforms:u}}let H;function j(e,t){return D(t,{width:e.drawingBufferWidth,height:e.drawingBufferHeight})}function z(e,t,r){var i;if("undefined"!=typeof WebGLRenderingContext&&e instanceof WebGLRenderingContext&&"f32"===t.numberFormat&&!e.getExtension("OES_texture_float"))throw new a("No support for floating point textures");const n=e.TEXTURE_2D,o=null!=(i=null==r?void 0:r.texture)?i:e.createTexture();if(!o)throw new s(`Could not create \`WebGLTexture\` for texture: ${function(e){return JSON.stringify(e,(function(e,t){if("resourceType"!==e){if(t instanceof Uint8Array||t instanceof Float32Array){const{length:e}=t;return{length:e}}if(t instanceof HTMLImageElement||t instanceof HTMLVideoElement){const{src:e,width:r,height:i}=t;return{src:e,width:r,height:i}}return t}console.log("stripping resource type",t)}),2)}(t)}`);e.bindTexture(n,o),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,"premultiply"===t.alpha),e.pixelStorei(e.UNPACK_ALIGNMENT,"r"===t.colorFormat?1:4);const h="f32"===t.numberFormat?e.FLOAT:e.UNSIGNED_BYTE,c=function(e,t){if("image"===t.textureType){const e=t.source;if("undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap)return e;if(e instanceof HTMLImageElement)return`${e.src}:${e.currentSrc}:${W(t)}`;if(e instanceof HTMLVideoElement)return`${e.src}:${e.currentSrc}:${e.currentTime}:${W(t)}`}else if("render"===t.textureType){const{width:r,height:i}=j(e,t);return`${r}:${i}`}}(e,t),u=W(t),d=!r||!c||c!==r.hash,f=Y(e,t.colorFormat),m=function(e,t,r){if(!("undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext&&"f32"===r))return Y(e,t);switch(t){case"r":throw e.R32F;case"rgb":return e.RGB32F;case"rgba":return e.RGBA32F;default:throw new l(t)}}(e,t.colorFormat,t.numberFormat);if(u&&d)if("image"!==t.textureType){const r=t.source,{width:i,height:s}=j(e,t);e.texImage2D(n,0,m,i,s,0,f,h,r)}else{const r=t.source;(function(e){return"tagName"in e&&"IMG"===e.tagName})(r)&&function(e){const t=document.createElement("a");return t.href=e,!("data:"===t.protocol||"blob:"===t.protocol)}(r.src)&&!r.crossOrigin&&console.warn(`Fragl warning: ${r.src} image may come from a different origin but you did not set the crossOrigin attribute.`),e.texImage2D(n,0,m,f,h,r)}const E="f32"===t.numberFormat?e.NEAREST:e.LINEAR;e.texParameteri(n,e.TEXTURE_MIN_FILTER,E),e.texParameteri(n,e.TEXTURE_MAG_FILTER,E),e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);const{anisotropy:g}=t,T=g?e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"):null;return g&&T&&(null!=H||(H=e.getParameter(T.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),e.texParameterf(e.TEXTURE_2D,T.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(g,H))),e.bindTexture(n,null),{texture:o,hash:c}}function Y(e,t){switch(t){case"r":return e.LUMINANCE;case"rgb":return e.RGB;case"rgba":return e.RGBA;default:throw new l(t)}}function W(e){if("image"===e.textureType){const t=e.source;if(t instanceof HTMLImageElement)return t.complete;if(t instanceof HTMLVideoElement)return t.readyState>=2}return!0}class ${constructor(e){this.gl=e,this.maxAttribs=Number(e.getParameter(e.MAX_VERTEX_ATTRIBS)),this.shouldEnable=Array.from({length:this.maxAttribs}).fill(!1),this.hasEnabled=Array.from({length:this.maxAttribs}).fill(!1)}setEnabled(e,t){if(e<0)throw new Error(`Attribute index ${e} is out of bounds`);if(e>=this.maxAttribs)throw new Error(`Attribute index ${e} exceeds the maximum number of attributes supported by this device: ${this.maxAttribs}`);this.shouldEnable[e]=t}update(){for(let e=0;e<this.maxAttribs;e++)this.shouldEnable[e]!==this.hasEnabled[e]&&(this.hasEnabled[e]=this.shouldEnable[e],this.shouldEnable[e]?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))}reset(){for(let e=0;e<this.maxAttribs;e++)this.shouldEnable[e]=!1}}class q{constructor(e,t){this.gl=e,this.bufferCache=new Map,this.shaderCache=new Map,this.textureCache=new Map,this.handleContextLost=e=>{if(this.onContextLost){let t="No WebGLContextEvent";e&&(t=(null==e?void 0:e.statusMessage)||"No statusMessage"),this.onContextLost(new n(`Error: WebGL context lost - ${t}`))}},this.env=(null==t?void 0:t.env)||window||{devicePixelRatio:1};const r=e.canvas;if(!r)throw new n("Unexpected canvas type: "+typeof r);this.onDispose=null==t?void 0:t.onDispose,this.canvas=r;const[i,s]=this.canvasSize;this.canvas.width=((null==t?void 0:t.width)||i)*this.env.devicePixelRatio,this.canvas.height=((null==t?void 0:t.height)||s)*this.env.devicePixelRatio,this.canvas.addEventListener("webglcontextlost",this.handleContextLost,{once:!0}),this.fbo=e.createFramebuffer(),this.vertexAttribArrayState=new $(e)}flush(){this.gl.flush()}resize(...e){let t,r;"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?[t=this.canvas.clientWidth,r=this.canvas.clientHeight]=e:[t,r]=e,this.canvas.width=t*this.env.devicePixelRatio,this.canvas.height=r*this.env.devicePixelRatio}load(e){const t=this.gl,r=Array.isArray(e)?e:e.resources;for(const i of r)switch(i.resourceType){case"buffer":case"elements":this.bufferCache.has(i.id)||this.bufferCache.set(i.id,O(t,i));break;case"shader":this.shaderCache.has(i.id)||this.shaderCache.set(i.id,X(t,i));break;case"texture":this.textureCache.has(i.id)||this.textureCache.set(i.id,z(t,i));break;default:throw new l(i)}}update(e){const t=this.gl,r=Array.isArray(e)?e:e.resources;for(const i of r)if("texture"===i.resourceType){const e=this.textureCache.get(i.id);if(!e)throw new n(`Could not update texture with ID: '${i.id}'. Did you remember to use load()?`);this.textureCache.set(i.id,z(t,i,e))}}clear(e,t){var r;const i=this.gl;if(t){const e=null==(r=this.textureCache.get(t.id))?void 0:r.texture;if(!e)throw new n(`Could not find render target with ID: ${t.id}. Did you remember to use load()?`);i.bindFramebuffer(i.FRAMEBUFFER,this.fbo),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,e,0)}else i.bindFramebuffer(i.FRAMEBUFFER,null);const s=Array.isArray(e),a=s?e:e.color,o=s?1:e.depth,h=s?255:e.stencil,l=void 0!==a,c=void 0!==o,u=void 0!==h;l&&i.clearColor(...a),c&&i.clearDepth(o),u&&i.clearStencil(h);const d=(l?i.COLOR_BUFFER_BIT:0)|(c?i.DEPTH_BUFFER_BIT:0)|(u?i.STENCIL_BUFFER_BIT:0);i.clear(d)}render(e){var t,r,i,s,h,l,c;const u=this.gl,d=Array.isArray(e)?e:e.renderables;for(const f of d){const e=this.shaderCache.get(f.shader.id);if(!e)throw new n(`Could not find shader with ID: ${f.shader.id}. Did you remember to use load()?`);if(f.blend){const{rgb:e,alpha:t}=f.blend;u.enable(u.BLEND),u.blendFuncSeparate(e.source,e.destination,t.source,t.destination),u.blendEquationSeparate(e.equation,t.equation)}else u.disable(u.BLEND);if(f.depthTest){const{depthTest:e}=f;u.enable(u.DEPTH_TEST),u.depthMask(e.mask),u.depthFunc(e.func),u.depthRange(e.range.near,e.range.far)}else u.disable(u.DEPTH_TEST);if(f.cullFace?(u.enable(u.CULL_FACE),u.frontFace(f.frontFace),u.cullFace(f.cullFace)):u.disable(u.CULL_FACE),u.useProgram(e.program),f.indices){const e=this.getBuffer(f.indices);u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,e)}else u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,null);const d=f.instances?u.getExtension("ANGLE_instanced_arrays"):null;if(f.instances&&!d)throw new a("Instancing is required but not supported on this device");this.vertexAttribArrayState.reset();for(const[a,{location:o,meta:h}]of e.attributes.entries()){this.vertexAttribArrayState.setEnabled(o,!0);const e=f.attributes[a];if(!e)throw new n(`Could not locate shader attribute ${a} within Renderable's attributes.`);const l=m(null!=(t=e.type)?t:e.buffer.dataType),c=this.getBuffer(e.buffer);u.bindBuffer(u.ARRAY_BUFFER,c),u.vertexAttribPointer(o,h.length,l,null!=(r=e.normalized)&&r,null!=(i=e.stride)?i:0,null!=(s=e.offset)?s:0),f.instances&&e.divisor&&d.vertexAttribDivisorANGLE(o,e.divisor)}this.vertexAttribArrayState.update();const E={...f.uniforms,...this.commonUniforms};for(const[t,r]of e.uniforms.entries()){const e=E[t];if(!e)throw new o(`Could not find a value for uniform '${t}'. Make sure you provide a value.`);r.equals(e)||(r.data=e,G(u,r))}for(const[t,r]of e.textures.entries()){u.activeTexture(u.TEXTURE0+r.data.flat()[0]),u.bindTexture(u.TEXTURE_2D,null);const e=f.textures[t];if(!e)throw new o(`Could not find a texture associated with uniform '${t}'. Make sure you provide a value.`);const i=null==(h=this.textureCache.get(e.id))?void 0:h.texture;if(!i)throw new n(`Could not find texture with ID: ${e.id}. Did you remember to use load()?`);u.bindTexture(u.TEXTURE_2D,i)}if(f.renderTarget){const e=null==(l=this.textureCache.get(f.renderTarget.id))?void 0:l.texture;if(!e)throw new n(`Could not find render target with ID: ${f.renderTarget.id}. Did you remember to use load()?`);const{width:t,height:r}=j(u,f.renderTarget);u.bindFramebuffer(u.FRAMEBUFFER,this.fbo),u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,e,0),u.viewport(0,0,t,r)}else u.bindFramebuffer(u.FRAMEBUFFER,null),u.viewport(0,0,u.drawingBufferWidth,u.drawingBufferHeight);f.instances?f.indices?d.drawElementsInstancedANGLE(f.primitive,f.indices.length,m(f.indices.dataType),0,f.instances):d.drawArraysInstancedANGLE(f.primitive,0,f.count,f.instances):f.indices?u.drawElements(f.primitive,f.indices.length,m(f.indices.dataType),0):u.drawArrays(f.primitive,0,null!=(c=f.count)?c:0)}}release(e){const t=Array.isArray(e)?e:e.resources;for(const r of t)this.deleteResource(r.id,r.resourceType)}readPixels(e){var t;const r=this.gl;let i;if(e){const s=null==(t=this.textureCache.get(e.id))?void 0:t.texture;if(!s)throw new n(`Could not find render target with ID: ${e.id}. Did you remember to use load()?`);i=j(r,e),r.bindFramebuffer(r.FRAMEBUFFER,this.fbo),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,s,0)}else r.bindFramebuffer(r.FRAMEBUFFER,null),i={width:r.drawingBufferWidth,height:r.drawingBufferHeight};const s=new Uint8Array(i.width*i.height*4);return r.readPixels(0,0,i.width,i.height,r.RGBA,r.UNSIGNED_BYTE,s),new ImageData(new Uint8ClampedArray(s.buffer),i.width,i.height)}dispose(){var e;const t=this.gl;for(const i of this.bufferCache.keys())this.deleteResource(i,"buffer");for(const i of this.shaderCache.keys())this.deleteResource(i,"shader");for(const i of this.textureCache.keys())this.deleteResource(i,"texture");this.bufferCache.clear(),this.shaderCache.clear(),this.textureCache.clear(),t.deleteFramebuffer(this.fbo),t.bindBuffer(t.ARRAY_BUFFER,null),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null);const r=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);for(let i=0;i<r;i++)t.activeTexture(t.TEXTURE0+i),t.bindTexture(t.TEXTURE_2D,null),t.bindTexture(t.TEXTURE_CUBE_MAP,null);this.canvas.width=this.canvas.height=0,this.canvas.removeEventListener("webglcontextlost",this.handleContextLost),null==(e=this.onDispose)||e.call(this)}deleteResource(e,t){var r;const i=this.gl;switch(t){case"buffer":case"elements":const s=this.bufferCache.get(e)||null;i.deleteBuffer(s),this.bufferCache.delete(e);break;case"shader":const n=this.shaderCache.get(e);i.deleteProgram((null==n?void 0:n.program)||null),this.shaderCache.delete(e);break;case"texture":const a=null==(r=this.textureCache.get(e))?void 0:r.texture;i.deleteTexture(a||null),this.textureCache.delete(e);break;default:throw new l(t)}}getBuffer(e){const t=this.bufferCache.get(e.id);if(!t)throw new n(`Could not find buffer with ID: ${e.id}. Did you remember to use load()?`);return t}get commonUniforms(){return{uResolution:[this.gl.drawingBufferWidth,this.gl.drawingBufferHeight],uViewSize:this.canvasSize,uDevicePixelRatio:[this.env.devicePixelRatio]}}get canvasSize(){return"undefined"!=typeof HTMLCanvasElement&&this.canvas instanceof HTMLCanvasElement?[this.canvas.clientWidth,this.canvas.clientHeight]:[this.canvas.width,this.canvas.height]}}const K="uPrevResult",Z={attributes:{aPosition:new A(new Float32Array([-1,-1,3,-1,-1,3]))},count:3},Q={attributes:{aPosition:new A(new Float32Array([-1,-1,1,1,-1,1,1,1,-1,-1,1,-1]))},count:6};function J(e){return e.replace(/void\s+main\(\s*\)\s*{([\s\S]*?)}\s*$/,((e,t)=>`void main() {${t}gl_FragColor.rgb *= gl_FragColor.a;\n}`))}function ee(e){return function(e){return Array.isArray(e)}(e)?e:[e]}const te=[],re=te;function ie(e,t,r,i,s=te){const n=s,a=n.find((s=>!e.includes(s.texture)&&t===s.width&&r===s.height&&i===s.size));if(a)return a.texture;const o=function(e,t,r,i){return new B({name:e,width:t,height:r,size:i||"relative",colorFormat:"rgba",numberFormat:"u8"})}(`pooled-render-texture-${n.length.toString()}`,t,r,i);return n.push({texture:o,width:t,height:r,size:i}),o}class se{constructor(e){this.index=0,this._textures=null!=e?e:[new B({colorFormat:"rgba",numberFormat:"u8"}),new B({colorFormat:"rgba",numberFormat:"u8"})]}get textures(){return this._textures}currentBuffer(){return this._textures[this.index]}nextBuffer(){return this.index=(this.index+1)%this._textures.length,this._textures[this.index]}}const ne=class e{static createPingpongBuffers({width:e,height:t,size:r}={}){const i=ie([],e,t,r),s=ie([i],e,t,r);return new se([i,s])}constructor({passes:t,uniforms:r,textures:i,options:{buffers:s,renderTarget:n,enableOneTriangleOptimisation:a}={}}){this.enableOneTriangleOptimisation=null!=a?a:e.enableOneTriangleOptimisation;const o=null!=s?s:e.createPingpongBuffers(n),{passes:h,uniforms:l}=this.convertShorthands(t,r);this.uniforms=l;const c=h[h.length-1];this.finalPassShaderForCanvas=this.getShader(c,!0),this.finalPassShaderForRenderTexture=this.getShader(c,!1);const u=this.createRenderTextures(h,o,n);this.renderables=this.getRenderables(h,u,o,i,n)}convertShorthands(e,t){return{passes:e.map((e=>"string"==typeof e?{fragment:e}:e)),uniforms:Object.fromEntries(Object.entries(null!=t?t:{}).map((([e,t])=>[e,ee(t)])))}}createRenderTextures(e,t,r){const i=new Map;for(const s of e)s.output&&i.set(s.output,ie([...t.textures,...i.values()],null==r?void 0:r.width,null==r?void 0:r.height,null==r?void 0:r.size));return i}getRenderables(e,t,r,i,s){const n=e.slice(0,-1).map((e=>{const s=this.getShader(e,!1),n=r.currentBuffer(),a=e.output?this.getRenderTexture(e.output,t):r.nextBuffer();return this.getRenderable(e,s,n,a,t,i)})),a=s?this.finalPassShaderForRenderTexture:this.finalPassShaderForCanvas;return[...n,this.getRenderable(e[e.length-1],a,r.currentBuffer(),s,t,i)]}getRenderable(e,t,r,i,s,n){const a=this.uniforms,o=this.getTextures(e,{...n,[K]:r},s),h=this.enableOneTriangleOptimisation?Z:Q;return new S({...h,shader:t,uniforms:a,textures:o,renderTarget:i})}getShader(e,t){const r=`\nattribute vec2 aPosition;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n    gl_Position = vec4(aPosition, 0.0, 1.0);\n    vTexCoord = aPosition * 0.5 + 0.5;\n    ${t?"vTexCoord.y = 1.0 - vTexCoord.y;":""}\n}\n  `,i=this.getFragmentSource(e.fragment,t);return new C({vertexSource:r,fragmentSource:i})}getFragmentSource(e,t){return t?J(e):e}getRenderTexture(e,t){const r=t.get(e);if(!r)throw new o(`Unable to assign texture. Could not find texture '${e}'.`);return r}getTextures(e,t,r){if(e.inputs)for(const i of e.inputs)t[i]=this.getRenderTexture(i,r);return t}update({textures:e,uniforms:t,renderTarget:r}){if(e)for(const[i,s]of Object.entries(e))if(s)for(const e of this.renderables)e.textures[i]=s;if(t)for(const[i,s]of Object.entries(t))this.uniforms[i]&&(this.uniforms[i]=ee(s));if(void 0!==r){const e=this.renderables[this.renderables.length-1],t=null===r?this.finalPassShaderForCanvas:this.finalPassShaderForRenderTexture;e.renderTarget=null!=r?r:void 0,e.shader=t}}get resources(){return[...new Set([...this.renderables.flatMap((e=>e.resources)),this.finalPassShaderForCanvas,this.finalPassShaderForRenderTexture])]}};ne.enableOneTriangleOptimisation=!1;let ae,oe,he=ne;function le(e,t){if(!(ae&&oe||(ae=document.createElement("canvas"),oe=ae.getContext("2d"),oe)))throw new r("Unable to establish `CanvasRenderingContext2D` for debugging");return ae.width=e,ae.height=t,{canvas:ae,context:oe}}function ce(e,t){const r=e.readPixels(t),{width:i,height:s}=r,{canvas:n,context:a}=le(i,s);a.putImageData(r,0,0);const o=n.toDataURL();fe(null!=t?t:e.canvas,o,i/s)}function ue(e){const{width:t,height:r}=e,{canvas:i,context:s}=le(t,r);e.source instanceof ImageData?s.putImageData(e.source,0,0):s.drawImage(e.source,0,0);fe(e,i.toDataURL(),t/r)}function de(e){const{source:t,colorFormat:r,width:i,height:s}=e,{canvas:n,context:a}=le(i,s),o="rgba"===r,h=a.createImageData(i,s),l=h.data;for(let c=0,u=0;c<t.length;c+=o?4:3,u+=4)l[u]=t[c],l[u+1]=t[c+1],l[u+2]=t[c+2],l[u+3]=o?t[c+3]:255;a.putImageData(h,0,0);fe(e,n.toDataURL(),i/s)}function fe(e,t,r){const i=`\n    font-size: 0;\n    padding-left: 256px;\n    padding-bottom: ${256/r}px;\n    vertical-align: top;\n    background-image: \n      url(${t}),\n      url('data:image/svg+xml,${encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">\n    <rect width="10" height="10" fill="#ccc"/>\n    <rect x="10" y="10" width="10" height="10" fill="#ccc"/>\n    <rect x="10" y="0" width="10" height="10" fill="white"/>\n    <rect y="10" width="10" height="10" fill="white"/>\n  </svg>')}');\n    background-position: center, 0 0;\n    background-size: contain, 20px 20px;\n    background-repeat: no-repeat, repeat;\n  `;console.group("Debugging",e),console.log("%c ",i),console.groupEnd()}const me="LkEaxkGQc",Ee="mXA59BV4k",ge="x8cqPYjGq",Te="zAvK5sktl",pe="j5BD_wqsh",ve="Flt8u8M0x",Ae="m5a6RRSnk",_e="MpMrqOkTf",be="ihJIFSpvi",Re="mjiW1vcGg",we="T1GP6ZTnQ",xe="zztE2SnZx",Fe="LPlLw5zPI",Me="MLGoNA0wv";var ye=1e-6,Se="undefined"!=typeof Float32Array?Float32Array:Array;function Ie(){var e=new Se(9);return Se!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function Ce(){var e=new Se(16);return Se!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function Ne(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Le(e,t,r){var i=t[0],s=t[1],n=t[2],a=t[3],o=t[4],h=t[5],l=t[6],c=t[7],u=t[8],d=t[9],f=t[10],m=t[11],E=t[12],g=t[13],T=t[14],p=t[15],v=r[0],A=r[1],_=r[2],b=r[3];return e[0]=v*i+A*o+_*u+b*E,e[1]=v*s+A*h+_*d+b*g,e[2]=v*n+A*l+_*f+b*T,e[3]=v*a+A*c+_*m+b*p,v=r[4],A=r[5],_=r[6],b=r[7],e[4]=v*i+A*o+_*u+b*E,e[5]=v*s+A*h+_*d+b*g,e[6]=v*n+A*l+_*f+b*T,e[7]=v*a+A*c+_*m+b*p,v=r[8],A=r[9],_=r[10],b=r[11],e[8]=v*i+A*o+_*u+b*E,e[9]=v*s+A*h+_*d+b*g,e[10]=v*n+A*l+_*f+b*T,e[11]=v*a+A*c+_*m+b*p,v=r[12],A=r[13],_=r[14],b=r[15],e[12]=v*i+A*o+_*u+b*E,e[13]=v*s+A*h+_*d+b*g,e[14]=v*n+A*l+_*f+b*T,e[15]=v*a+A*c+_*m+b*p,e}function Ue(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function Pe(e,t){var r=t[0],i=t[1],s=t[2],n=t[3],a=r+r,o=i+i,h=s+s,l=r*a,c=i*a,u=i*o,d=s*a,f=s*o,m=s*h,E=n*a,g=n*o,T=n*h;return e[0]=1-u-m,e[1]=c+T,e[2]=d-g,e[3]=0,e[4]=c-T,e[5]=1-l-m,e[6]=f+E,e[7]=0,e[8]=d+g,e[9]=f-E,e[10]=1-l-u,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var Be=function(e,t,r,i,s){var n,a=1/Math.tan(t/2);return e[0]=a/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=s&&s!==1/0?(n=1/(i-s),e[10]=(s+i)*n,e[14]=2*s*i*n):(e[10]=-1,e[14]=-2*i),e};function De(e,t,r,i){var s,n,a,o,h,l,c,u,d,f,m=t[0],E=t[1],g=t[2],T=i[0],p=i[1],v=i[2],A=r[0],_=r[1],b=r[2];return Math.abs(m-A)<ye&&Math.abs(E-_)<ye&&Math.abs(g-b)<ye?Ne(e):(c=m-A,u=E-_,d=g-b,s=p*(d*=f=1/Math.hypot(c,u,d))-v*(u*=f),n=v*(c*=f)-T*d,a=T*u-p*c,(f=Math.hypot(s,n,a))?(s*=f=1/f,n*=f,a*=f):(s=0,n=0,a=0),o=u*a-d*n,h=d*s-c*a,l=c*n-u*s,(f=Math.hypot(o,h,l))?(o*=f=1/f,h*=f,l*=f):(o=0,h=0,l=0),e[0]=s,e[1]=o,e[2]=c,e[3]=0,e[4]=n,e[5]=h,e[6]=u,e[7]=0,e[8]=a,e[9]=l,e[10]=d,e[11]=0,e[12]=-(s*m+n*E+a*g),e[13]=-(o*m+h*E+l*g),e[14]=-(c*m+u*E+d*g),e[15]=1,e)}function Oe(){var e=new Se(3);return Se!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function ke(e){var t=e[0],r=e[1],i=e[2];return Math.hypot(t,r,i)}function Ge(e,t,r){var i=new Se(3);return i[0]=e,i[1]=t,i[2]=r,i}function Ve(){var e=new Se(4);return Se!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}Oe(),function(){var e=function(){var e=new Se(4);return Se!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}()}();var Xe=function(e,t,r,i){var s=new Se(4);return s[0]=e,s[1]=t,s[2]=r,s[3]=i,s};!function(){var e=Oe(),t=Ge(1,0,0),r=Ge(0,1,0)}(),function(){var e=Ve(),t=Ve()}(),function(){var e=Ie()}();const He=new P({width:1,height:1,source:new Uint8Array([0,0,0,0])});const je=e=>{if(void 0===e.camera)return{cameraKind:"perspective",perspective:{aspectRatio:1.7777777,yfov:.39959652046304894,znear:.10000000149011612,zfar:1e3},id:-1,name:"default camera",rotation:[0,0,0,0],scale:[1,1,1],translation:[0,0,.3499999940395355]};const t=void 0!==e.camera.perspective?"perspective":"orthographic";return"perspective"===t?{name:e.name,id:e.id,translation:e.translation,rotation:e.rotation,scale:e.scale,cameraKind:t,perspective:e.camera.perspective}:{name:e.name,id:e.id,translation:e.translation,rotation:e.rotation,scale:e.scale,cameraKind:t,orthographic:e.camera.orthographic}},ze=1313821514,Ye=5130562;var We=(e=>(e[e.GLTF_BUFFER_TYPE_BYTE=5120]="GLTF_BUFFER_TYPE_BYTE",e[e.GLTF_BUFFER_TYPE_UNSIGNED_BYTE=5121]="GLTF_BUFFER_TYPE_UNSIGNED_BYTE",e[e.GLTF_BUFFER_TYPE_SHORT=5122]="GLTF_BUFFER_TYPE_SHORT",e[e.GLTF_BUFFER_TYPE_UNSIGNED_SHORT=5123]="GLTF_BUFFER_TYPE_UNSIGNED_SHORT",e[e.GLTF_BUFFER_TYPE_UNSIGNED_INT=5125]="GLTF_BUFFER_TYPE_UNSIGNED_INT",e[e.GLTF_BUFFER_TYPE_FLOAT=5126]="GLTF_BUFFER_TYPE_FLOAT",e))(We||{});const $e={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},qe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Ke=async e=>(await fetch(e)).arrayBuffer(),Ze=e=>(new TextDecoder).decode(e);class Qe{constructor(e,t,r){this.chunks=[],this.bufferCache=[],this.imageCache=[],this.baseUrl="",this.gltf=t,this.chunks=r,this.baseUrl=e}async accessorData(e){if(!this.gltf.accessors)throw new Error("No accessors views found.");const t=this.gltf.accessors[e],r=qe[t.type];return{buffer:await this.getBufferViewFromAccessor(t),elementsPerType:r}}async getBufferViewFromAccessor(e){if(void 0!==e.bufferView){const t=await this.bufferViewData(e.bufferView,e.componentType);return e.sparse?new Uint8Array(t):t}const t=qe[e.type],r=$e[e.componentType].BYTES_PER_ELEMENT*t*e.count;return new Uint8Array(r)}async bufferViewData(e,t){if(!this.gltf.bufferViews)throw new Error("No buffer views found.");const r=this.gltf.bufferViews[e],i=await this.getBufferData(r.buffer),s=r.byteLength||0,n=r.byteOffset||0,a=i.buffer,o=i.byteOffset;switch(t){case We.GLTF_BUFFER_TYPE_BYTE:return new Int8Array(a,o+n,s);case We.GLTF_BUFFER_TYPE_UNSIGNED_BYTE:return new Uint8Array(a,o+n,s);case We.GLTF_BUFFER_TYPE_SHORT:return new Int16Array(a,o+n,s/2);case We.GLTF_BUFFER_TYPE_UNSIGNED_SHORT:return new Uint16Array(a,o+n,s/2);case We.GLTF_BUFFER_TYPE_UNSIGNED_INT:return new Uint32Array(a,o+n,s/4);case We.GLTF_BUFFER_TYPE_FLOAT:return new Float32Array(a,o+n,s/4)}return new Uint8Array(a,o+n,s)}async getBufferData(e){if(void 0!==this.bufferCache[e])return this.bufferCache[e];if(!this.gltf.buffers)throw new Error("No buffers found.");const t=this.gltf.buffers[e];if(void 0===t.uri){if(0!==e)throw new Error("GLB container is required to be the first buffer");if(void 0===this.chunks)throw new Error("invalid gltf: buffer has no uri nor is there a GLB buffer");return this.chunks[e]}let r=new ArrayBuffer(0);r=t.uri.includes("data:application")?(e=>{try{const t=e.split("base64,")[1];return Uint8Array.from(atob(t),(e=>e.charCodeAt(0))).buffer}catch{return new ArrayBuffer(0)}})(t.uri):await Ke(this.baseUrl+t.uri);const i=new Uint8Array(r);return this.bufferCache[e]=i,i}async getImageData(e){if(void 0!==this.imageCache[e])return this.imageCache[e];if(!this.gltf.images)throw new Error("No images found.");const t=this.gltf.images[e];let r;if(void 0!==t.bufferView){const e=await this.bufferViewData(t.bufferView,We.GLTF_BUFFER_TYPE_BYTE),i=new Blob([e],{type:t.mimeType});r=URL.createObjectURL(i)}else{if(void 0===t.uri)throw new Error("Invalid glTF: image must either have a `uri` or a `bufferView`");r=t.uri.includes("base64")?t.uri:this.baseUrl+t.uri}const i=await(async e=>new Promise(((t,r)=>{const i=new Image;i.onload=()=>{t(i)},i.onerror=e=>{r(e)},i.crossOrigin="anonymous",i.src=e})))(r);return this.imageCache[e]=i,i}}const Je=e=>{let t="";try{const r=new URL(e),i=r.href.split("/");t=r.href.replace(i[i.length-1],"")}catch{t=""}return t},et=async e=>{let t,r,i=[];if(!(e.startsWith("blob:")||e.startsWith("http://")||e.startsWith("https://")))return console.log("fetch retunr external "),null;try{t=await(async e=>await(await fetch(e)).json())(e),r={magic:"glTF",version:parseFloat(t.asset.version),length:0}}catch{let s=await Ke(e);r=(e=>{const t=new DataView(e,0,12);return{magic:Ze(new Uint8Array(e,0,4)),version:t.getUint32(4,!0),length:t.getUint32(8,!0)}})(s),({json:t,chunks:i}=rt(s))}return{json:t,header:r,chunks:i}},tt=async e=>{var t;if("string"!=typeof e)throw new Error("Invalid URI: String is expected.");const r=null!=(t=await et(e))?t:(e=>{try{const t=JSON.parse(e);return{json:t,header:{magic:"glTF",version:parseFloat(t.asset.version),length:0},chunks:[]}}catch{return null}})(e);if(null===r)throw new Error("Failed to fetch data.");const{json:i,header:s,chunks:n}=r;if("glTF"!==s.magic||s.version<2)throw new Error(`File format is not supported! Current header magic: ${s.magic}, version ${s.version}`);if(void 0===i)throw new Error("JSON content not found.");if(void 0===i.asset||parseFloat(i.asset.version)<2)throw new Error("Unsupported asset. glTF versions >= 2.0 are supported.");return{json:i,chunks:n}},rt=e=>{const t=[];let r;const i=new DataView(e,12);let s=0;for(;s<i.byteLength;){const n=i.getUint32(s,!0);s+=4;const a=i.getUint32(s,!0);if(s+=4,a===ze){const t=new Uint8Array(e,12+s,n);r=JSON.parse(Ze(t))}else if(a===Ye){const r=12+s;t.push(new Uint8Array(e,r,n))}s+=n}return{json:r,chunks:t}},it="placeholder",st=e=>e instanceof Uint16Array?5123:e instanceof Uint32Array?5125:5121,nt=e=>{const t=[];return e.forEach(((e,r)=>{var i,s;e.name.toLowerCase().includes(it)?t.push({meshIndex:r,name:e.name}):null!=(i=e.material)&&i.name.toLowerCase().includes(it)&&t.push({meshIndex:r,name:null==(s=e.material)?void 0:s.name})})),t},at=e=>{const t=[];return e.forEach((e=>{e.targets.length>0&&t.push(...e.targets)})),t},ot=(e,t)=>{const r=(e=>{const t=[];return e.mesh.forEach(((r,i)=>{const s=r.uvs&&r.uvs.length?r.uvs:new Float32Array(r.positions.length/3*2);t.push({name:e.name+"_"+(i+1).toString(),vertices:r.positions,normals:r.normals,uvs:s,tangent:r.tangent,indices:r.indices,material:r.material,id:i,renderingContextBase:st(r.indices)})})),t})(e),i=(e=>{let t=0;return e.forEach((e=>{t+=e.positions.length})),t})(e.mesh);return{mesh:r,placeholder:nt(r),targets:at(e.mesh),transform:e.translation.length>0?Ue(Ce(),Ge(e.translation[0],e.translation[1],e.translation[2])):Ce(),rotation:e.rotation.length>0?Pe(Ce(),Xe(e.rotation[0],e.rotation[1],e.rotation[2],e.rotation[3])):Ce(),scale:e.scale.length>0?Ge(e.scale[0],e.scale[1],e.scale[2]):Ge(1,1,1),name:e.name,parrent:t,positionPrevious:new Float32Array(i),positionNext:new Float32Array(i),animation:{rotation:{times:new Uint8Array,values:[],interpolation:""},transform:{times:new Uint8Array,values:[],interpolation:""},scale:{times:new Uint8Array,values:[],interpolation:""},weights:{times:new Uint8Array,values:new Float32Array,targets:[],interpolation:"",positions:[]}},progression:0,extras:e.extras}},ht=(e=-1,t="",r=[])=>({id:e,name:t,children:r,mesh:[],scale:[],rotation:[],translation:[],camera:void 0,extras:{highlightCorrection:1,shadowCorrection:1}});const lt=Ge(0,1,0),ct=[.5*Math.PI,.5*Math.PI];t.AdditiveBlending={source:"src alpha",destination:"one",equation:"add"},t.BinaryTexture=P,t.Buffer=A,t.Effect=he,t.ElementsBuffer=_,t.FraglAllocationError=s,t.FraglCompilationError=i,t.FraglError=r,t.FraglInternalError=h,t.FraglPlatformError=a,t.FraglRuntimeError=n,t.FraglValidationError=o,t.GltfParser=class{constructor(e){this.src=e,this.camera=ht(),this.cameraModel=je(this.camera),this.nodes=[],this.clips=[],this.model=[],this.images=[],this.textures=[],this.samplers=[]}async parse(e={}){return this.model=[],this.asset=await(async e=>{const t=Je(e),r=await tt(e);return new Qe(t,r.json,r.chunks)})(this.src),this.images=await this.getTextureImages(e.imageFilesToReplace),this.updateTexturesData(),this.camera=ht(),this.nodes=await this.getSubNodes(),this.cameraModel=this.getCameraModel(),this.clips=await this.getClips(),this.model=await this.getModel(),this.updateAnimation(),{camera:this.cameraModel,model:this.model,images:this.images,textures:this.textures,samplers:this.samplers}}async getModel(e,t,r=[]){const i=(void 0===e?this.nodes:e).map((e=>{const i=ot(e,t);return e.children.length>0&&this.getModel(e.children,e,r),i}));return r.push(...await Promise.all(i)),r}updateAnimation(){this.clips.forEach((e=>{e.tracks.forEach((e=>{const t=this.model.findIndex((t=>t.name===e.targetObject));if(t>-1){const r=this.model[t];switch(e.targetProperty.toLocaleLowerCase()){case"translation":r.animation.transform.values=this.decodeVector3Animation(e.values,e.valuesElements),r.animation.transform.times=e.times,r.animation.transform.interpolation=e.interpolation;break;case"rotation":r.animation.rotation.values=this.decodeQuaternionAnimation(e.values,e.valuesElements),r.animation.rotation.times=e.times,r.animation.rotation.interpolation=e.interpolation;break;case"scale":r.animation.scale.values=this.decodeVector3Animation(e.values,e.valuesElements),r.animation.scale.times=e.times,r.animation.scale.interpolation=e.interpolation;break;case"weights":r.targets.length>0&&(r.animation.weights.targets=this.model[t].targets,r.animation.weights.times=e.times,r.animation.weights.values=e.values,r.animation.weights.interpolation=e.interpolation,((e,t)=>{const r=e.values.length/e.targets.length;for(let i=0;i<r;i++){const r=i*e.targets.length,s=[];for(let i=0;i<t;i+=3){s[i]=0,s[i+1]=0,s[i+2]=0;for(let t=0;t<e.targets.length;t++){const n=r+t;s[i]+=e.targets[t].positions[i]*e.values[n],s[i+1]+=e.targets[t].positions[i+1]*e.values[n],s[i+2]+=e.targets[t].positions[i+2]*e.values[n]}}e.positions[i]=new Float32Array(s)}})(r.animation.weights,this.getModelVerticesLength(r.mesh)))}}}))})),this.cameraModel.id>-1&&(this.cameraModel.animation=this.model[this.cameraModel.id].animation,this.model=this.model.filter((e=>!e.name.toLocaleLowerCase().includes("camera"))))}getModelVerticesLength(e){let t=0;return e.forEach((e=>{t+=e.vertices.length})),t}decodeQuaternionAnimation(e,t){const r=[];let i=0;for(let s=0;s<e.length;s+=t){const n=Ve();for(let r=0;r<t;r++)n[r]=e[s+r];r[i]=n,i++}return r}decodeVector3Animation(e,t){const r=[];let i=0;for(let s=0;s<e.length;s+=t){const n=Oe();for(let r=0;r<t;r++)n[r]=e[s+r];r[i]=n,i++}return r}async getClips(e=[]){const t=this.getGltfFromAsset();if(void 0===t.animations)return e;const r=t.animations.map((async e=>{const t=await this.getTracks(e);return{name:e.name,tracks:t}}));return e.push(...await Promise.all(r)),e}getTracks(e){const t=this.getAsset();return Promise.all(e.channels.map((async r=>{var i;const s=e.samplers[r.sampler],n=await t.accessorData(s.input),a=await t.accessorData(s.output);return{targetIndex:r.target.node,targetObject:t.gltf.nodes[r.target.node].name,targetProperty:r.target.path,interpolation:null!=(i=s.interpolation)?i:"LINEAR",times:n.buffer,timesElements:n.elementsPerType,values:a.buffer,valuesElements:a.elementsPerType}})))}getCameraModel(){return je(this.camera)}updateTexturesData(){var e;this.textures=[],this.samplers=[];const t=this.getGltfFromAsset();this.samplers=null!=(e=t.samplers)?e:[],void 0!==t.textures&&t.textures.forEach(((e,t)=>{e&&(this.textures[t]={sampler:e.sampler,source:e.source})}))}replaceImages(e,t){const r=t.find((t=>{var r;if(null!=(r=e.name)&&r.includes(t.name))return t}));if(!r)throw new o(`No image file found with the name of: ${e.name}`);return r}async getTextureImages(e){if(void 0===this.asset||void 0===this.asset.gltf.images)return[];const t=this.asset.gltf.images.map((async(t,r)=>{var i;return e?this.replaceImages(t,e):{mimeType:t.mimeType,name:t.name,img:await(null==(i=this.asset)?void 0:i.getImageData(r))}}));return Promise.all(t)}async getSubNodes(e,t){const r=this.getGltfFromAsset(),i=0|r.scene,s=r.scenes[i],n=(void 0===e?s.nodes:e).map((async e=>{const i=r.nodes[e],s=ht(e,i.name);return void 0!==i.children&&(s.children=await this.getSubNodes(i.children,i)),void 0!==i.mesh&&(s.mesh=await this.getSubMesh(r.meshes[i.mesh])),s.rotation=[0,0,0,0],void 0!==i.rotation?s.rotation=i.rotation:void 0!==t&&void 0!==t.rotation&&(s.rotation[0]=s.rotation[0]*t.rotation[0],s.rotation[1]=s.rotation[1]*t.rotation[1],s.rotation[2]=s.rotation[2]*t.rotation[2],s.rotation[3]=s.rotation[3]*t.rotation[3]),s.translation=[0,0,0],void 0!==i.translation?s.translation=i.translation:void 0!==t&&void 0!==t.translation&&(s.translation[0]=s.translation[0]*t.translation[0],s.translation[1]=s.translation[1]*t.translation[1],s.translation[2]=s.translation[2]*t.translation[2]),s.scale=[1,1,1],void 0!==i.scale?s.scale=i.scale:void 0!==t&&void 0!==t.scale&&(s.scale[0]=s.scale[0]*t.scale[0],s.scale[1]=s.scale[1]*t.scale[1],s.scale[2]=s.scale[2]*t.scale[2]),void 0!==i.camera&&(s.camera=r.cameras[i.camera],this.camera=s),s.extras=void 0,void 0!==i.extras&&(s.extras={highlightCorrection:1,shadowCorrection:1},s.extras.highlightCorrection=void 0!==i.extras.Highlight_Correction?i.extras.Highlight_Correction:1,s.extras.shadowCorrection=void 0!==i.extras.Shadow_Correction?i.extras.Shadow_Correction:1),s}));return Promise.all(n)}getMaterial(e){const t=this.getAsset().gltf.materials[e];return void 0!==t.pbrMetallicRoughness&&(void 0===t.pbrMetallicRoughness.metallicFactor&&(t.pbrMetallicRoughness.metallicFactor=1),void 0===t.pbrMetallicRoughness.roughnessFactor&&(t.pbrMetallicRoughness.roughnessFactor=1),void 0===t.pbrMetallicRoughness.baseColorFactor&&(t.pbrMetallicRoughness.baseColorFactor=[1,1,1,1])),t}async getTargets(e){const t=this.getAsset(),r=e.targets.map((async e=>{const r={normals:new Uint8Array(0),positions:new Uint8Array(0),tangent:new Uint8Array(0)};return void 0!==e.POSITION&&(r.positions=(await t.accessorData(e.POSITION)).buffer),void 0!==e.NORMAL&&(r.normals=(await t.accessorData(e.NORMAL)).buffer),void 0!==e.TANGENT&&(r.tangent=(await t.accessorData(e.TANGENT)).buffer),r}));return Promise.all(r)}async getSubMesh(e){const t=this.getAsset(),r=e.primitives.map((async e=>{const r={positions:new Uint8Array(0),normals:new Uint8Array(0),uvs:new Uint8Array(0),tangent:new Uint8Array(0),indices:new Uint8Array(0),targets:[],material:void 0};if(void 0!==e.attributes.POSITION&&(r.positions=(await t.accessorData(e.attributes.POSITION)).buffer),void 0!==e.attributes.NORMAL&&(r.normals=(await t.accessorData(e.attributes.NORMAL)).buffer),void 0!==e.attributes.TEXCOORD_0&&(r.uvs=(await t.accessorData(e.attributes.TEXCOORD_0)).buffer,0===r.uvs.length&&(r.uvs=new Float32Array(r.positions.length/3*2))),void 0!==e.attributes.TANGENT&&(r.tangent=(await t.accessorData(e.attributes.TANGENT)).buffer),void 0!==e.indices){const i=await t.accessorData(e.indices);r.indices=i.buffer}return void 0!==e.targets&&(r.targets=await this.getTargets(e)),void 0!==e.material&&(r.material=this.getMaterial(e.material)),r}));return Promise.all(r)}getAsset(){if(void 0===this.asset)throw new Error("Asset is undefined");return this.asset}getGltfFromAsset(){return this.getAsset().gltf}},t.ImageTexture=U,t.MockWebGLRenderingContext=class{constructor(e){this.canvas=e,this.drawingBufferColorSpace="srgb",this.DEPTH_BUFFER_BIT=256,this.STENCIL_BUFFER_BIT=1024,this.COLOR_BUFFER_BIT=16384,this.POINTS=0,this.LINES=1,this.LINE_LOOP=2,this.LINE_STRIP=3,this.TRIANGLES=4,this.TRIANGLE_STRIP=5,this.TRIANGLE_FAN=6,this.ZERO=0,this.ONE=1,this.SRC_COLOR=768,this.ONE_MINUS_SRC_COLOR=769,this.SRC_ALPHA=770,this.ONE_MINUS_SRC_ALPHA=771,this.DST_ALPHA=772,this.ONE_MINUS_DST_ALPHA=773,this.DST_COLOR=774,this.ONE_MINUS_DST_COLOR=775,this.SRC_ALPHA_SATURATE=776,this.FUNC_ADD=32774,this.BLEND_EQUATION=32777,this.BLEND_EQUATION_RGB=32777,this.BLEND_EQUATION_ALPHA=34877,this.FUNC_SUBTRACT=32778,this.FUNC_REVERSE_SUBTRACT=32779,this.BLEND_DST_RGB=32968,this.BLEND_SRC_RGB=32969,this.BLEND_DST_ALPHA=32970,this.BLEND_SRC_ALPHA=32971,this.CONSTANT_COLOR=32769,this.ONE_MINUS_CONSTANT_COLOR=32770,this.CONSTANT_ALPHA=32771,this.ONE_MINUS_CONSTANT_ALPHA=32772,this.BLEND_COLOR=32773,this.ARRAY_BUFFER=34962,this.ELEMENT_ARRAY_BUFFER=34963,this.ARRAY_BUFFER_BINDING=34964,this.ELEMENT_ARRAY_BUFFER_BINDING=34965,this.STREAM_DRAW=35040,this.STATIC_DRAW=35044,this.DYNAMIC_DRAW=35048,this.BUFFER_SIZE=34660,this.BUFFER_USAGE=34661,this.CURRENT_VERTEX_ATTRIB=34342,this.FRONT=1028,this.BACK=1029,this.FRONT_AND_BACK=1032,this.CULL_FACE=2884,this.BLEND=3042,this.DITHER=3024,this.STENCIL_TEST=2960,this.DEPTH_TEST=2929,this.SCISSOR_TEST=3089,this.POLYGON_OFFSET_FILL=32823,this.SAMPLE_ALPHA_TO_COVERAGE=32926,this.SAMPLE_COVERAGE=32928,this.NO_ERROR=0,this.INVALID_ENUM=1280,this.INVALID_VALUE=1281,this.INVALID_OPERATION=1282,this.OUT_OF_MEMORY=1285,this.CW=2304,this.CCW=2305,this.LINE_WIDTH=2849,this.ALIASED_POINT_SIZE_RANGE=33901,this.ALIASED_LINE_WIDTH_RANGE=33902,this.CULL_FACE_MODE=2885,this.FRONT_FACE=2886,this.DEPTH_RANGE=2928,this.DEPTH_WRITEMASK=2930,this.DEPTH_CLEAR_VALUE=2931,this.DEPTH_FUNC=2932,this.STENCIL_CLEAR_VALUE=2961,this.STENCIL_FUNC=2962,this.STENCIL_FAIL=2964,this.STENCIL_PASS_DEPTH_FAIL=2965,this.STENCIL_PASS_DEPTH_PASS=2966,this.STENCIL_REF=2967,this.STENCIL_VALUE_MASK=2963,this.STENCIL_WRITEMASK=2968,this.STENCIL_BACK_FUNC=34816,this.STENCIL_BACK_FAIL=34817,this.STENCIL_BACK_PASS_DEPTH_FAIL=34818,this.STENCIL_BACK_PASS_DEPTH_PASS=34819,this.STENCIL_BACK_REF=36003,this.STENCIL_BACK_VALUE_MASK=36004,this.STENCIL_BACK_WRITEMASK=36005,this.VIEWPORT=2978,this.SCISSOR_BOX=3088,this.COLOR_CLEAR_VALUE=3106,this.COLOR_WRITEMASK=3107,this.UNPACK_ALIGNMENT=3317,this.PACK_ALIGNMENT=3333,this.MAX_TEXTURE_SIZE=3379,this.MAX_VIEWPORT_DIMS=3386,this.SUBPIXEL_BITS=3408,this.RED_BITS=3410,this.GREEN_BITS=3411,this.BLUE_BITS=3412,this.ALPHA_BITS=3413,this.DEPTH_BITS=3414,this.STENCIL_BITS=3415,this.POLYGON_OFFSET_UNITS=10752,this.POLYGON_OFFSET_FACTOR=32824,this.TEXTURE_BINDING_2D=32873,this.SAMPLE_BUFFERS=32936,this.SAMPLES=32937,this.SAMPLE_COVERAGE_VALUE=32938,this.SAMPLE_COVERAGE_INVERT=32939,this.COMPRESSED_TEXTURE_FORMATS=34467,this.DONT_CARE=4352,this.FASTEST=4353,this.NICEST=4354,this.GENERATE_MIPMAP_HINT=33170,this.BYTE=5120,this.UNSIGNED_BYTE=5121,this.SHORT=5122,this.UNSIGNED_SHORT=5123,this.INT=5124,this.UNSIGNED_INT=5125,this.FLOAT=5126,this.DEPTH_COMPONENT=6402,this.ALPHA=6406,this.RGB=6407,this.RGBA=6408,this.LUMINANCE=6409,this.LUMINANCE_ALPHA=6410,this.UNSIGNED_SHORT_4_4_4_4=32819,this.UNSIGNED_SHORT_5_5_5_1=32820,this.UNSIGNED_SHORT_5_6_5=33635,this.FRAGMENT_SHADER=35632,this.VERTEX_SHADER=35633,this.MAX_VERTEX_ATTRIBS=34921,this.MAX_VERTEX_UNIFORM_VECTORS=36347,this.MAX_VARYING_VECTORS=36348,this.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,this.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,this.MAX_TEXTURE_IMAGE_UNITS=34930,this.MAX_FRAGMENT_UNIFORM_VECTORS=36349,this.SHADER_TYPE=35663,this.DELETE_STATUS=35712,this.LINK_STATUS=35714,this.VALIDATE_STATUS=35715,this.ATTACHED_SHADERS=35717,this.ACTIVE_UNIFORMS=35718,this.ACTIVE_ATTRIBUTES=35721,this.SHADING_LANGUAGE_VERSION=35724,this.CURRENT_PROGRAM=35725,this.NEVER=512,this.LESS=513,this.EQUAL=514,this.LEQUAL=515,this.GREATER=516,this.NOTEQUAL=517,this.GEQUAL=518,this.ALWAYS=519,this.KEEP=7680,this.REPLACE=7681,this.INCR=7682,this.DECR=7683,this.INVERT=5386,this.INCR_WRAP=34055,this.DECR_WRAP=34056,this.VENDOR=7936,this.RENDERER=7937,this.VERSION=7938,this.NEAREST=9728,this.LINEAR=9729,this.NEAREST_MIPMAP_NEAREST=9984,this.LINEAR_MIPMAP_NEAREST=9985,this.NEAREST_MIPMAP_LINEAR=9986,this.LINEAR_MIPMAP_LINEAR=9987,this.TEXTURE_MAG_FILTER=10240,this.TEXTURE_MIN_FILTER=10241,this.TEXTURE_WRAP_S=10242,this.TEXTURE_WRAP_T=10243,this.TEXTURE_2D=3553,this.TEXTURE=5890,this.TEXTURE_CUBE_MAP=34067,this.TEXTURE_BINDING_CUBE_MAP=34068,this.TEXTURE_CUBE_MAP_POSITIVE_X=34069,this.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,this.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,this.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,this.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,this.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,this.MAX_CUBE_MAP_TEXTURE_SIZE=34076,this.TEXTURE0=33984,this.TEXTURE1=33985,this.TEXTURE2=33986,this.TEXTURE3=33987,this.TEXTURE4=33988,this.TEXTURE5=33989,this.TEXTURE6=33990,this.TEXTURE7=33991,this.TEXTURE8=33992,this.TEXTURE9=33993,this.TEXTURE10=33994,this.TEXTURE11=33995,this.TEXTURE12=33996,this.TEXTURE13=33997,this.TEXTURE14=33998,this.TEXTURE15=33999,this.TEXTURE16=34e3,this.TEXTURE17=34001,this.TEXTURE18=34002,this.TEXTURE19=34003,this.TEXTURE20=34004,this.TEXTURE21=34005,this.TEXTURE22=34006,this.TEXTURE23=34007,this.TEXTURE24=34008,this.TEXTURE25=34009,this.TEXTURE26=34010,this.TEXTURE27=34011,this.TEXTURE28=34012,this.TEXTURE29=34013,this.TEXTURE30=34014,this.TEXTURE31=34015,this.ACTIVE_TEXTURE=34016,this.REPEAT=10497,this.CLAMP_TO_EDGE=33071,this.MIRRORED_REPEAT=33648,this.FLOAT_VEC2=35664,this.FLOAT_VEC3=35665,this.FLOAT_VEC4=35666,this.INT_VEC2=35667,this.INT_VEC3=35668,this.INT_VEC4=35669,this.BOOL=35670,this.BOOL_VEC2=35671,this.BOOL_VEC3=35672,this.BOOL_VEC4=35673,this.FLOAT_MAT2=35674,this.FLOAT_MAT3=35675,this.FLOAT_MAT4=35676,this.SAMPLER_2D=35678,this.SAMPLER_CUBE=35680,this.VERTEX_ATTRIB_ARRAY_ENABLED=34338,this.VERTEX_ATTRIB_ARRAY_SIZE=34339,this.VERTEX_ATTRIB_ARRAY_STRIDE=34340,this.VERTEX_ATTRIB_ARRAY_TYPE=34341,this.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,this.VERTEX_ATTRIB_ARRAY_POINTER=34373,this.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,this.IMPLEMENTATION_COLOR_READ_TYPE=35738,this.IMPLEMENTATION_COLOR_READ_FORMAT=35739,this.COMPILE_STATUS=35713,this.LOW_FLOAT=36336,this.MEDIUM_FLOAT=36337,this.HIGH_FLOAT=36338,this.LOW_INT=36339,this.MEDIUM_INT=36340,this.HIGH_INT=36341,this.FRAMEBUFFER=36160,this.RENDERBUFFER=36161,this.RGBA4=32854,this.RGB5_A1=32855,this.RGBA8=32856,this.RGB565=36194,this.DEPTH_COMPONENT16=33189,this.STENCIL_INDEX8=36168,this.DEPTH_STENCIL=34041,this.RENDERBUFFER_WIDTH=36162,this.RENDERBUFFER_HEIGHT=36163,this.RENDERBUFFER_INTERNAL_FORMAT=36164,this.RENDERBUFFER_RED_SIZE=36176,this.RENDERBUFFER_GREEN_SIZE=36177,this.RENDERBUFFER_BLUE_SIZE=36178,this.RENDERBUFFER_ALPHA_SIZE=36179,this.RENDERBUFFER_DEPTH_SIZE=36180,this.RENDERBUFFER_STENCIL_SIZE=36181,this.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,this.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,this.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,this.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,this.COLOR_ATTACHMENT0=36064,this.DEPTH_ATTACHMENT=36096,this.STENCIL_ATTACHMENT=36128,this.DEPTH_STENCIL_ATTACHMENT=33306,this.NONE=0,this.FRAMEBUFFER_COMPLETE=36053,this.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,this.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,this.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,this.FRAMEBUFFER_UNSUPPORTED=36061,this.FRAMEBUFFER_BINDING=36006,this.RENDERBUFFER_BINDING=36007,this.MAX_RENDERBUFFER_SIZE=34024,this.INVALID_FRAMEBUFFER_OPERATION=1286,this.UNPACK_FLIP_Y_WEBGL=37440,this.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,this.CONTEXT_LOST_WEBGL=37442,this.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,this.BROWSER_DEFAULT_WEBGL=37444}get drawingBufferWidth(){return this.canvas.width}get drawingBufferHeight(){return this.canvas.height}activeTexture(){}attachShader(){}bindAttribLocation(){}bindBuffer(){}bindFramebuffer(){}bindRenderbuffer(){}bindTexture(){}blendColor(){}blendEquation(){}blendEquationSeparate(){}blendFunc(){}blendFuncSeparate(){}bufferData(){}bufferSubData(){}checkFramebufferStatus(){return this.FRAMEBUFFER_COMPLETE}clear(){}clearColor(){}clearDepth(){}clearStencil(){}colorMask(){}compileShader(){}compressedTexImage2D(){}compressedTexSubImage2D(){}copyTexImage2D(){}copyTexSubImage2D(){}createBuffer(){return{}}createFramebuffer(){return{}}createProgram(){return{}}createRenderbuffer(){return{}}createShader(){return{}}createTexture(){return{}}cullFace(){}deleteBuffer(){}deleteFramebuffer(){}deleteProgram(){}deleteRenderbuffer(){}deleteShader(){}deleteTexture(){}depthFunc(){}depthMask(){}depthRange(){}detachShader(){}disable(){}disableVertexAttribArray(){}drawArrays(){}drawElements(){}enable(){}enableVertexAttribArray(){}finish(){}flush(){}framebufferRenderbuffer(){}framebufferTexture2D(){}frontFace(){}generateMipmap(){}getActiveAttrib(){return{}}getActiveUniform(){return null}getAttachedShaders(){return[]}getAttribLocation(){return 0}getBufferParameter(){return 0}getContextAttributes(){return{}}getError(){return this.NO_ERROR}getExtension(){return null}getFramebufferAttachmentParameter(){return 0}getParameter(){return 0}getProgramInfoLog(){return""}getProgramParameter(){return{}}getRenderbufferParameter(){return 0}getShaderInfoLog(){return""}getShaderParameter(){return!0}getShaderPrecisionFormat(){return{rangeMin:127,rangeMax:127,precision:127}}getShaderSource(){return""}getSupportedExtensions(){return[]}getTexParameter(){return 0}getUniform(){return 0}getUniformLocation(){return null}getVertexAttrib(){return 0}getVertexAttribOffset(){return 0}hint(){}isBuffer(){return!1}isContextLost(){return!1}isEnabled(){return!1}isFramebuffer(){return!1}isProgram(){return!1}isRenderbuffer(){return!1}isShader(){return!1}isTexture(){return!1}lineWidth(){}linkProgram(){}pixelStorei(){}polygonOffset(){}readPixels(){}renderbufferStorage(){}sampleCoverage(){}scissor(){}shaderSource(){}stencilFunc(){}stencilFuncSeparate(){}stencilMask(){}stencilMaskSeparate(){}stencilOp(){}stencilOpSeparate(){}texImage2D(){}texParameterf(){}texParameteri(){}texSubImage2D(){}uniform1f(){}uniform1fv(){}uniform1i(){}uniform1iv(){}uniform2f(){}uniform2fv(){}uniform2i(){}uniform2iv(){}uniform3f(){}uniform3fv(){}uniform3i(){}uniform3iv(){}uniform4f(){}uniform4fv(){}uniform4i(){}uniform4iv(){}uniformMatrix2fv(){}uniformMatrix3fv(){}uniformMatrix4fv(){}useProgram(){}validateProgram(){}vertexAttrib1f(){}vertexAttrib1fv(){}vertexAttrib2f(){}vertexAttrib2fv(){}vertexAttrib3f(){}vertexAttrib3fv(){}vertexAttrib4f(){}vertexAttrib4fv(){}vertexAttribPointer(){}viewport(){}},t.ModelViewer=class{constructor(e){this._renderables={},this._renderables=e}get renderables(){return Object.values(this._renderables)}get resources(){return this.renderables.flatMap((e=>e.resources))}getUniformsToUpdateView(e,t){return e.getUniformsToUpdateView(t)}updateAll({uniforms:e}){if(e)for(const t of this.renderables)e.uCameraPosition&&(t.uniforms[Me]=e.uCameraPosition),e.uMVPMatrix&&(t.uniforms[we]=e.uMVPMatrix),e.uNormalMatrix&&(t.uniforms[Fe]=e.uNormalMatrix)}updateOne({id:e,textures:t}){const r=this._renderables[e];if(!r)throw new o(`Renderable with id ${e} not found`);t&&t.uPlaceholderTexture&&(r.textures[ve]=t.uPlaceholderTexture)}},t.ModelViewerGltfData=class{constructor(e,t=!1){this.gltf=e,this.meshes=this.gltf.model.map((e=>e.mesh)).flat(),this.shader=new C({vertexSource:"#extension GL_OES_standard_derivatives:enable\nprecision highp float;attribute vec2 zztE2SnZx;attribute vec3 ihJIFSpvi,mjiW1vcGg;uniform mat4 T1GP6ZTnQ;uniform mat3 LPlLw5zPI;uniform vec3 MLGoNA0wv;varying vec2 m;varying vec3 j,p,L,s;void main(){mat4 a=T1GP6ZTnQ;gl_Position=a*vec4(ihJIFSpvi,1.),j=ihJIFSpvi,s=MLGoNA0wv,m=zztE2SnZx,p=LPlLw5zPI*mjiW1vcGg,L=normalize(mjiW1vcGg);}vec3 l=vec3(1.);",fragmentSource:t?"#extension GL_OES_standard_derivatives:enable\nprecision highp float;uniform vec4 LkEaxkGQc;uniform float x8cqPYjGq,zAvK5sktl;uniform sampler2D j5BD_wqsh,m5a6RRSnk,Flt8u8M0x,MpMrqOkTf;varying vec2 m;varying vec3 j,p,s;uniform ivec4 mXA59BV4k;bool D(){return mXA59BV4k.x==1;}bool E(){return mXA59BV4k.y==1;}bool F(){return mXA59BV4k.z==1;}bool G(){return mXA59BV4k.w==1;}float u(vec3 d,vec3 e,float a){float c=a*a*a*a,b=max(dot(d,e),0.),f=b*b*(c-1.)+1.;return c/(3.141593*f*f);}float v(float b,float c){float a=c+1.,d=a*a*.125;return b/(b*(1.-d)+d);}float w(vec3 a,vec3 b,vec3 c,float d){float e=max(dot(a,c),0.),f=max(dot(a,b),0.);return v(e,d)*v(f,d);}vec3 x(float b,vec3 a){return a+(1.-a)*pow(1.-b,5.);}vec3 H(sampler2D e,vec3 b,const vec2 a,vec3 f){vec3 o=texture2D(e,a).xyz*2.-1.,g=dFdx(b),h=dFdy(b);vec2 i=dFdx(a),k=dFdy(a);vec3 c=normalize(f),d=normalize(g*k.t-h*i.t),n=-normalize(cross(c,d));mat3 q=mat3(d,n,c);return normalize(q*o);}vec3 l=vec3(1.);vec3 r(vec3 I,vec3 a,vec3 b,vec3 c,vec3 k,float d,float n,float J){vec3 e=vec3(.04);e=mix(e,I,n);vec3 f=normalize(c+b);float o=u(a,f,d),q=w(a,b,c,d);vec3 g=x(max(dot(f,b),0.),e),y=g,i=vec3(1.)-y;i*=1.-n;float h=max(dot(a,c),0.);vec3 z=o*q*g;float A=4.*max(dot(a,b),0.)*h+1e-3;vec3 B=z/A,C=i,K=(C+B)*k*h;return J*K;}void main(){vec3 b[6];b[0]=normalize(vec3(0.,0.,1.5)),b[1]=normalize(vec3(-1.,0.,.3)),b[2]=normalize(vec3(1.,0.,.3)),b[3]=normalize(vec3(0.,1.,1.5));vec3 c=p,a=LkEaxkGQc.rgb;float g=LkEaxkGQc.a;if(D())a=texture2D(j5BD_wqsh,m).rgb,g=texture2D(j5BD_wqsh,m).a;c=E()?H(m5a6RRSnk,j,m,p):c;float d=x8cqPYjGq;d=G()?texture2D(MpMrqOkTf,m).r:d;float h=zAvK5sktl;vec3 i=normalize(s-j),e=vec3(0.);e=r(a,c,i,b[0]-j,l,d,h,1.5),e+=r(a,c,i,normalize(b[1]-j),l,d,h,.75),e+=r(a,c,i,normalize(b[2]-j),l,d,h,.75),e+=r(a,c,i,normalize(b[3]-j),l,d,h,.75);if(F()){vec4 f=texture2D(Flt8u8M0x,m);a=g==0.?f.rgb*f.a:f.rgb*f.a+a*(1.-f.a),g=max(g,f.a);}a=pow(a,vec3(2.2));vec3 k=a*e*.45;k=pow(k,vec3(.454545)),gl_FragColor=vec4(k,g);}":"#extension GL_OES_standard_derivatives:enable\nprecision highp float;uniform vec4 LkEaxkGQc;uniform float x8cqPYjGq,zAvK5sktl;uniform sampler2D j5BD_wqsh,m5a6RRSnk,Flt8u8M0x,MpMrqOkTf;varying vec2 m;varying vec3 j,p,s;uniform ivec4 mXA59BV4k;bool D(){return mXA59BV4k.x==1;}bool E(){return mXA59BV4k.y==1;}bool F(){return mXA59BV4k.z==1;}bool G(){return mXA59BV4k.w==1;}float u(vec3 d,vec3 e,float a){float c=a*a*a*a,b=max(dot(d,e),0.),f=b*b*(c-1.)+1.;return c/(3.141593*f*f);}float v(float b,float c){float a=c+1.,d=a*a*.125;return b/(b*(1.-d)+d);}float w(vec3 a,vec3 b,vec3 c,float d){float e=max(dot(a,c),0.),f=max(dot(a,b),0.);return v(e,d)*v(f,d);}vec3 x(float b,vec3 a){return a+(1.-a)*pow(1.-b,5.);}vec3 H(sampler2D e,vec3 b,const vec2 a,vec3 f){vec3 o=texture2D(e,a).xyz*2.-1.,g=dFdx(b),h=dFdy(b);vec2 i=dFdx(a),k=dFdy(a);vec3 c=normalize(f),d=normalize(g*k.t-h*i.t),n=-normalize(cross(c,d));mat3 q=mat3(d,n,c);return normalize(q*o);}vec3 l=vec3(1.);vec3 t(vec3 b,vec3 c,vec3 d,vec3 e,float h){float f=max(dot(c,d),0.);vec3 g=f*e*b,a=g;a=clamp(a,0.,1.);return h*a;}vec3 r(vec3 I,vec3 a,vec3 b,vec3 c,vec3 k,float d,float n,float J){vec3 e=vec3(.04);e=mix(e,I,n);vec3 f=normalize(c+b);float o=u(a,f,d),q=w(a,b,c,d);vec3 g=x(max(dot(f,b),0.),e),y=g,i=vec3(1.)-y;i*=1.-n;float h=max(dot(a,c),0.);vec3 z=o*q*g;float A=4.*max(dot(a,b),0.)*h+1e-3;vec3 B=z/A,C=i,K=(C+B)*k*h;return J*K;}void main(){vec3 a[6];a[0]=normalize(vec3(1.,-.5,1.)),a[1]=normalize(vec3(-1.,1.5,1.)),a[2]=normalize(vec3(.4,.4,-1.)),a[3]=normalize(vec3(0.,-1.,0.)),a[4]=normalize(vec3(-1.,0.,0.)),a[5]=normalize(vec3(1.,0.,0.));vec3 c=p,b=LkEaxkGQc.rgb;float g=LkEaxkGQc.a;if(D())b=texture2D(j5BD_wqsh,m).rgb,g=texture2D(j5BD_wqsh,m).a,b=pow(b,vec3(2.2));c=E()?H(m5a6RRSnk,j,m,p):c;float h=x8cqPYjGq;h=G()?texture2D(MpMrqOkTf,m).r:h;float k=zAvK5sktl;vec3 n=normalize(s-j),i=vec3(0.);i=r(b,c,n,a[0]-j,l,h,k,.1),i+=r(b,c,n,normalize(a[1]-j),l,h,k,.1),i+=r(b,c,n,normalize(a[2]-j),l,h,k,.1);vec3 d=t(b,c,a[0]-j,l,1.);d+=t(b,c,a[1]-j,l,1.),d+=t(b,c,a[2]-j,l,1.45),d+=t(b,c,a[3]-j,l,.65),d+=t(b,c,a[4]-j,l,.65),d+=t(b,c,a[5]-j,l,.25);vec3 e=LkEaxkGQc.rgb;if(F()){vec4 f=texture2D(Flt8u8M0x,m);e=g==0.?f.rgb*f.a:f.rgb*f.a+e*(1.-f.a),e=pow(e,vec3(2.2)),g=max(g,f.a);}vec3 o=e*(d+i);o=pow(o,vec3(.454545)),gl_FragColor=vec4(o,g);}"})}getRenderables(){return Object.fromEntries(this.meshes.map((e=>[e.name,this.gltfMeshToRenderable(e)])))}gltfMeshToRenderable(e){if(!e.material)throw new a("Mesh material not found");const{baseColorFactor:t,baseColorTexture:r,isBaseColorTexture:i,metallicFactor:s,roughnessFactor:n,roughnessTexture:o,isRoughnessTexture:h,normalTexture:l,isNormalTexture:c,placeholder:u,isPlaceholderTexture:d,isDoubleSided:f}=this.gltfMaterialToTextures(e.material,this.gltf.images,this.gltf.textures),m=i?1:0,E=c?1:0,g=d?1:0,T=h?1:0;return new S({attributes:{[be]:new A(e.vertices),[Re]:new A(e.normals),[xe]:new A(e.uvs)},textures:{[pe]:r,[ve]:u,[Ae]:l,[_e]:o},uniforms:{[Me]:[0,0,0],[me]:[t[0],t[1],t[2],t[3]],[Te]:[s],[ge]:[n],[Ee]:[m,E,g,T],[we]:Array.from(Ce()),[Fe]:Array.from(Ie())},shader:this.shader,indices:new _(e.indices),depthTest:{mask:!0,func:"less",range:{near:0,far:1}},...!f&&{cullFace:"back"}})}gltfMaterialToTextures(e,t,r){const i=e.pbrMetallicRoughness.baseColorFactor,s=e.pbrMetallicRoughness.metallicFactor,n=e.pbrMetallicRoughness.roughnessFactor,a=void 0!==e.pbrMetallicRoughness.baseColorTexture,o=e.pbrMetallicRoughness.baseColorTexture?new U({source:t[r[e.pbrMetallicRoughness.baseColorTexture.index].source].img,anisotropy:16}):He,h=e.normalTexture?new U({source:t[r[e.normalTexture.index].source].img,anisotropy:16}):He,l=void 0!==e.normalTexture,c=e.pbrMetallicRoughness.metallicRoughnessTexture?new U({source:t[r[e.pbrMetallicRoughness.metallicRoughnessTexture.index].source].img,anisotropy:16}):He,u=void 0!==e.pbrMetallicRoughness.metallicRoughnessTexture,d=e.name.includes("placeholder");return{baseColorFactor:i,baseColorTexture:o,metallicFactor:s,roughnessFactor:n,roughnessTexture:c,isRoughnessTexture:u,isBaseColorTexture:a,normalTexture:h,isNormalTexture:l,placeholder:He,isPlaceholderTexture:d,isDoubleSided:e.doubleSided}}getDataToUpdateAllPlaceholders(e){return this.meshes.filter((e=>{var t;return null==(t=e.material)?void 0:t.name.includes("placeholder")})).map((t=>({id:t.name,textures:{uPlaceholderTexture:new U({source:e,anisotropy:16})}})))}getDataToUpdateSinglePlaceholder(e,t){if(!this.meshes.find((t=>{var r;return t.name===e&&(null==(r=t.material)?void 0:r.name.includes("placeholder"))})))throw new a("Mesh not found");return{id:e,textures:{uPlaceholderTexture:new U({source:t,anisotropy:16})}}}},t.OrbitControls=class{constructor(e,{initialDistance:t,minDistance:r,maxDistance:i,initialRotation:s,rotationTarget:n,enableZooming:a=!1}){if(this.container=e,this.velocity=[0,0],this.mousePosition=[0,0],this.clientSizeRatio=[1,1],this.isMouseDown=!1,this.projectionMatrix=Ce(),this.viewMatrix=Ce(),this.modelMatrix=Ce(),this.modelViewProjectionMatrix=Ce(),this.cameraPosition=Oe(),this.onMouseDown=e=>{e.preventDefault(),this.mousePosition[0]=e.x,this.mousePosition[1]=e.y,this.clientSizeRatio[0]=window.innerWidth/this.container.clientWidth,this.clientSizeRatio[1]=window.innerHeight/this.container.clientHeight,this.isMouseDown=!0},this.onMouseMove=e=>{if(!this.isMouseDown)return;const{x:t,y:r}=e,i=t-this.mousePosition[0],s=r-this.mousePosition[1],n=.3*Math.sqrt(this.distance);this.velocity[0]=i*n*this.clientSizeRatio[0],this.velocity[1]=s*n*this.clientSizeRatio[1],this.mousePosition[0]=t,this.mousePosition[1]=r,this.tick()},this.onMouseUp=e=>{this.isMouseDown=!1,e.target===this.container&&e.preventDefault()},this.onWheelMove=e=>{e.preventDefault(),e.stopPropagation();const{deltaY:t}=e;if(Number.isNaN(t))return;const r=this.distance+t*this.distance*5e-4;this.zoomToDistance(r)},this.toggleZooming=e=>{e?this.container.addEventListener("wheel",this.onWheelMove,!1):this.container.removeEventListener("wheel",this.onWheelMove,!1)},this.tick=()=>{this.rotation[0]+=.01*this.velocity[0],this.rotation[1]-=.01*this.velocity[1],this.rotation[0]=(this.rotation[0]+2*Math.PI)%(2*Math.PI),this.rotation[1]=Math.min(.99*Math.PI,Math.max(.01,this.rotation[1])),this.velocity[0]*=.95,this.velocity[1]*=.95;const e=this.velocity[0]*this.velocity[0],t=this.velocity[1]*this.velocity[1];return Math.sqrt(e+t)<5e-5&&(this.velocity[0]=0,this.velocity[1]=0),this.updateCameraPosition(),this},this.moveToRotation=(e,t)=>{null!=e&&(this.rotation[0]=(e+2*Math.PI)%(2*Math.PI)),null!=t&&(this.rotation[1]=Math.min(.99*Math.PI,Math.max(.01,t))),this.velocity[0]=0,this.velocity[1]=0},this.loadCameraSettings=({initialCameraDistance:e,cameraDistanceRange:t})=>{this.zoomToDistance(e),this.enableZooming&&null!=t?(this.minDistance=t.min,this.maxDistance=t.max,this.toggleZooming(!0)):this.toggleZooming(!1)},this.zoomToDistance=e=>{null!=e&&(this.distance=Math.min(this.maxDistance,Math.max(e,this.minDistance)))},this.checkCamera=()=>{},void 0!==r&&r<=0)throw new o("Invalid value of minDistance. Expected value must be greater than 0.");this.enableZooming=a,this.distance=null!=t?t:1.5,this.minDistance=null!=r?r:.1,this.maxDistance=null!=i?i:20,this.rotationTarget=null!=n?n:"camera",this.rotation=null!=s?s:ct,this.updateCameraPosition(),this.container.addEventListener("mousedown",this.onMouseDown,!1),window.addEventListener("mousemove",this.onMouseMove,!1),window.addEventListener("mouseup",this.onMouseUp,!1)}dispose(){this.container.removeEventListener("mousedown",this.onMouseDown,!1),window.removeEventListener("mousemove",this.onMouseMove,!1),window.removeEventListener("mouseup",this.onMouseUp,!1),this.toggleZooming(!1)}getUniformsToUpdateView(e){return{uniforms:{uCameraPosition:[this.cameraPosition[0],this.cameraPosition[1],this.cameraPosition[2]],uMVPMatrix:this.createMVPMatrix(e),uNormalMatrix:this.createNormalMatrix()}}}createViewMatrix(e){if("model"===this.rotationTarget){const t=[0,0,ke(e)];De(this.viewMatrix,t,e,lt)}else De(this.viewMatrix,e,e,lt);return this.viewMatrix}createModelMatrix(){if(Ne(this.modelMatrix),"model"===this.rotationTarget){const[e,t]=this.rotation;(function(e,t,r){var i=Math.sin(r),s=Math.cos(r),n=t[4],a=t[5],o=t[6],h=t[7],l=t[8],c=t[9],u=t[10],d=t[11];t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=n*s+l*i,e[5]=a*s+c*i,e[6]=o*s+u*i,e[7]=h*s+d*i,e[8]=l*s-n*i,e[9]=c*s-a*i,e[10]=u*s-o*i,e[11]=d*s-h*i})(this.modelMatrix,this.modelMatrix,-t+Math.PI/2),function(e,t,r){var i=Math.sin(r),s=Math.cos(r),n=t[0],a=t[1],o=t[2],h=t[3],l=t[8],c=t[9],u=t[10],d=t[11];t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=n*s-l*i,e[1]=a*s-c*i,e[2]=o*s-u*i,e[3]=h*s-d*i,e[8]=n*i+l*s,e[9]=a*i+c*s,e[10]=o*i+u*s,e[11]=h*i+d*s}(this.modelMatrix,this.modelMatrix,e-Math.PI/2)}return this.modelMatrix}createMVPMatrix(e){this.createModelMatrix(),this.createViewMatrix(this.cameraPosition),Be(this.projectionMatrix,.4,e,.01,1e3);const t=Ge(0,0,0),r=Ge(0,1,0);return De(this.viewMatrix,this.cameraPosition,t,r),Le(this.modelViewProjectionMatrix,this.viewMatrix,this.modelMatrix),Le(this.modelViewProjectionMatrix,this.projectionMatrix,this.modelViewProjectionMatrix),Array.from(this.modelViewProjectionMatrix)}updateCameraPosition(){const[e,t]="camera"===this.rotationTarget?this.rotation:ct;this.cameraPosition[0]=this.distance*Math.cos(e)*Math.sin(t),this.cameraPosition[1]=this.distance*Math.cos(t),this.cameraPosition[2]=this.distance*Math.sin(e)*Math.sin(t)}createNormalMatrix(){const e=Ie();return function(e,t){var r=t[0],i=t[1],s=t[2],n=t[3],a=t[4],o=t[5],h=t[6],l=t[7],c=t[8],u=t[9],d=t[10],f=t[11],m=t[12],E=t[13],g=t[14],T=t[15],p=r*o-i*a,v=r*h-s*a,A=r*l-n*a,_=i*h-s*o,b=i*l-n*o,R=s*l-n*h,w=c*E-u*m,x=c*g-d*m,F=c*T-f*m,M=u*g-d*E,y=u*T-f*E,S=d*T-f*g,I=p*S-v*y+A*M+_*F-b*x+R*w;I&&(I=1/I,e[0]=(o*S-h*y+l*M)*I,e[1]=(h*F-a*S-l*x)*I,e[2]=(a*y-o*F+l*w)*I,e[3]=(s*y-i*S-n*M)*I,e[4]=(r*S-s*F+n*x)*I,e[5]=(i*F-r*y-n*w)*I,e[6]=(E*R-g*b+T*_)*I,e[7]=(g*A-m*R-T*v)*I,e[8]=(m*b-E*A+T*p)*I)}(e,this.modelMatrix),Array.from(e)}},t.PingpongBuffers=se,t.PremultipliedNormalBlending={source:"one",destination:"one minus src alpha",equation:"add"},t.RenderTexture=B,t.Renderable=S,t.Renderer=class{constructor(e){this.resources=new Map,this.create=e,this.backend=this.createBackend()}createBackend(){const e=this.create();return e.onContextLost=e=>{var t;null==(t=this.onContextLost)||t.call(this,e)},e}load(e){this.backend.load(e);const t=Array.isArray(e)?e:e.resources;for(const r of t)this.resources.set(r.id,r)}update(e){this.backend.update(e)}clear(e,t){this.backend.clear(e,t)}render(e){this.backend.render(e)}readPixels(e){return this.backend.readPixels(e)}flush(){this.backend.flush()}release(e){this.backend.release(e);const t=Array.isArray(e)?e:e.resources;for(const r of t)this.resources.delete(r.id)}dispose(){this.backend.dispose(),this.resources.clear()}restore(){this.backend.dispose(),this.backend=this.createBackend(),this.backend.load(Array.from(this.resources.values()))}resize(...e){const[t,r]=e;if(t===this.canvas.width&&r===this.canvas.height)return;this.backend.resize(...e);const i=Array.from(this.resources.values()).filter((e=>"texture"===e.resourceType&&!e.source&&"relative"===e.size));this.backend.update(i)}get canvas(){return this.backend.canvas}},t.Shader=C,t.WebGlRenderer=q,t._renderTexturePool=re,t.createWebGlRenderer=function(e,t){var r,i,n;const a=document.createElement("canvas");e.append(a),a.style.width="100%",a.style.height="100%";let o="Unknown";const h=e=>{e.statusMessage&&(o=e.statusMessage)};a.addEventListener("webglcontextcreationerror",h);const l={alpha:null==(r=null==t?void 0:t.alpha)||r,antialias:null==(i=null==t?void 0:t.antialias)||i,depth:null!=(n=null==t?void 0:t.depth)&&n,stencil:!1,preserveDrawingBuffer:!(null==t||!t.preserveDrawingBuffer),powerPreference:"high-performance",failIfMajorPerformanceCaveat:!(null==t||!t.failIfMajorPerformanceCaveat)},c=null!=t&&t.useWebGl2?a.getContext("webgl2",l):a.getContext("webgl",l);if(a.removeEventListener("webglcontextcreationerror",h),!c)throw new s(`A WebGL context could not be created. Reason: ${o}`);return new q(c,{...t,onDispose:()=>{a.remove()}})},t.debugBinaryTexture=de,t.debugImageTexture=ue,t.debugRenderTexture=ce,t.debugTexture=function(e,t){t&&"render"!==t.textureType?"image"===t.textureType?ue(t):de(t):ce(e,t)},t.getAbsoluteTextureSize=D,t.getPooledRenderTexture=ie,t.injectAlphaPremultiplication=J,t.paddedTuple=function(e,t,r){if(e.length>r)return e.slice(0,r);const i=[...e];for(;i.length<r;)i.push(t);return i}},609205:e=>{e.exports={words:["ad","adipisicing","aliqua","aliquip","amet","anim","aute","cillum","commodo","consectetur","consequat","culpa","cupidatat","deserunt","do","dolor","dolore","duis","ea","eiusmod","elit","enim","esse","est","et","eu","ex","excepteur","exercitation","fugiat","id","in","incididunt","ipsum","irure","labore","laboris","laborum","Lorem","magna","minim","mollit","nisi","non","nostrud","nulla","occaecat","officia","pariatur","proident","qui","quis","reprehenderit","sint","sit","sunt","tempor","ullamco","ut","velit","veniam","voluptate"]}},621680:(e,t,r)=>{"use strict";e.exports=r(447524)},802950:(e,t,r)=>{"use strict";r.d(t,{a:()=>n});var i=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var i,s,n;if(Array.isArray(t)){if((i=t.length)!=r.length)return!1;for(s=i;0!=s--;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((i=(n=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(s=i;0!=s--;)if(!Object.prototype.hasOwnProperty.call(r,n[s]))return!1;for(s=i;0!=s--;){var a=n[s];if(!e(t[a],r[a]))return!1}return!0}return t!=t&&r!=r};const s="__googleMapsScriptId";class n{constructor({apiKey:e,channel:t,client:r,id:a=s,libraries:o=[],language:h,region:l,version:c,mapIds:u,nonce:d,retries:f=3,url:m="https://maps.googleapis.com/maps/api/js"}){if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.version=c,this.apiKey=e,this.channel=t,this.client=r,this.id=a||s,this.libraries=o,this.language=h,this.region=l,this.mapIds=u,this.nonce=d,this.retries=f,this.url=m,n.instance){if(!i(this.options,n.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(n.instance.options)}`);return n.instance}n.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url}}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+=`?callback=${this.CALLBACK}`,this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),e}load(){return this.loadPromise()}loadPromise(){return new Promise(((e,t)=>{this.loadCallback((r=>{r?t(r.error):e(window.google)}))}))}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const e=this.createUrl(),t=document.createElement("script");t.id=this.id,t.type="text/javascript",t.src=e,t.onerror=this.loadErrorCallback.bind(this),t.defer=!0,t.async=!0,this.nonce&&(t.nonce=this.nonce),document.head.appendChild(t)}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const e=this.errors.length*Math.pow(2,this.errors.length);console.log(`Failed to load Google Maps script, retrying in ${e} ms.`),setTimeout((()=>{this.deleteScript(),this.setScript()}),e)}else this.onerrorEvent=e,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach((e=>{e(this.onerrorEvent)})),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}},809774:e=>{!function(){"use strict";e.exports={polyfill:function(){var e=window,t=document;if(!("scrollBehavior"in t.documentElement.style)||!0===e.__forceSmoothScrollPolyfill__){var r,i=e.HTMLElement||e.Element,s=468,n={scroll:e.scroll||e.scrollTo,scrollBy:e.scrollBy,elementScroll:i.prototype.scroll||h,scrollIntoView:i.prototype.scrollIntoView},a=e.performance&&e.performance.now?e.performance.now.bind(e.performance):Date.now,o=(r=e.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(r)?1:0);e.scroll=e.scrollTo=function(){void 0!==arguments[0]&&(!0!==l(arguments[0])?m.call(e,t.body,void 0!==arguments[0].left?~~arguments[0].left:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:e.scrollY||e.pageYOffset):n.scroll.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:e.scrollY||e.pageYOffset))},e.scrollBy=function(){void 0!==arguments[0]&&(l(arguments[0])?n.scrollBy.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):m.call(e,t.body,~~arguments[0].left+(e.scrollX||e.pageXOffset),~~arguments[0].top+(e.scrollY||e.pageYOffset)))},i.prototype.scroll=i.prototype.scrollTo=function(){if(void 0!==arguments[0])if(!0!==l(arguments[0])){var e=arguments[0].left,t=arguments[0].top;m.call(this,this,void 0===e?this.scrollLeft:~~e,void 0===t?this.scrollTop:~~t)}else{if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");n.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}},i.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==l(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):n.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},i.prototype.scrollIntoView=function(){if(!0!==l(arguments[0])){var r=function(e){for(;e!==t.body&&!1===d(e);)e=e.parentNode||e.host;return e}(this),i=r.getBoundingClientRect(),s=this.getBoundingClientRect();r!==t.body?(m.call(this,r,r.scrollLeft+s.left-i.left,r.scrollTop+s.top-i.top),"fixed"!==e.getComputedStyle(r).position&&e.scrollBy({left:i.left,top:i.top,behavior:"smooth"})):e.scrollBy({left:s.left,top:s.top,behavior:"smooth"})}else n.scrollIntoView.call(this,void 0===arguments[0]||arguments[0])}}function h(e,t){this.scrollLeft=e,this.scrollTop=t}function l(e){if(null===e||"object"!=typeof e||void 0===e.behavior||"auto"===e.behavior||"instant"===e.behavior)return!0;if("object"==typeof e&&"smooth"===e.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+e.behavior+" is not a valid value for enumeration ScrollBehavior.")}function c(e,t){return"Y"===t?e.clientHeight+o<e.scrollHeight:"X"===t?e.clientWidth+o<e.scrollWidth:void 0}function u(t,r){var i=e.getComputedStyle(t,null)["overflow"+r];return"auto"===i||"scroll"===i}function d(e){var t=c(e,"Y")&&u(e,"Y"),r=c(e,"X")&&u(e,"X");return t||r}function f(t){var r,i,n,o,h=(a()-t.startTime)/s;o=h=h>1?1:h,r=.5*(1-Math.cos(Math.PI*o)),i=t.startX+(t.x-t.startX)*r,n=t.startY+(t.y-t.startY)*r,t.method.call(t.scrollable,i,n),i===t.x&&n===t.y||e.requestAnimationFrame(f.bind(e,t))}function m(r,i,s){var o,l,c,u,d=a();r===t.body?(o=e,l=e.scrollX||e.pageXOffset,c=e.scrollY||e.pageYOffset,u=n.scroll):(o=r,l=r.scrollLeft,c=r.scrollTop,u=h),f({scrollable:o,method:u,startTime:d,startX:l,startY:c,x:i,y:s})}}}}()}}]);
//# sourceMappingURL=sourcemaps/7826abba3fbce5d2.vendor.js.map